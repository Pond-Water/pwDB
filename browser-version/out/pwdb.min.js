!function o(a,u,c){function s(t,e){if(!u[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(f)return f(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var i=u[t]={exports:{}};a[t][0].call(i.exports,function(e){return s(a[t][1][e]||e)},i,i.exports,o,a,u,c)}return u[t].exports}for(var f="function"==typeof require&&require,e=0;e<c.length;e++)s(c[e]);return s}({1:[function(e,t,n){var c=Object.create||function(e){var t=function(){};return t.prototype=e,new t},a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n},o=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function r(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=c(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((t.exports=r).EventEmitter=r).prototype._events=void 0,r.prototype._maxListeners=void 0;var i,u=10;try{var s={};Object.defineProperty&&Object.defineProperty(s,"x",{value:0}),i=0===s.x}catch(e){i=!1}function f(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var i,o,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]):(o=e._events=c(null),e._eventsCount=0),a){if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(i=f(e))&&0<i&&a.length>i){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",u.name,u.message)}}else a=o[t]=n,++e._eventsCount;return e}function h(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=o.call(h,r);return i.listener=n,r.wrapFn=i}function d(e,t,n){var r=e._events;if(!r)return[];var i=r[t];return i?"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):v(i,i.length):[]}function y(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function v(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}i?Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');u=e}}):r.defaultMaxListeners=u,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return f(this)},r.prototype.emit=function(e){var t,n,r,i,o,a,u="error"===e;if(a=this._events)u=u&&null==a.error;else if(!u)return!1;if(u){if(1<arguments.length&&(t=arguments[1]),t instanceof Error)throw t;var c=new Error('Unhandled "error" event. ('+t+")");throw c.context=t,c}if(!(n=a[e]))return!1;var s="function"==typeof n;switch(r=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var r=e.length,i=v(e,r),o=0;o<r;++o)i[o].call(n)}(n,s,this);break;case 2:!function(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,o=v(e,i),a=0;a<i;++a)o[a].call(n,r)}(n,s,this,arguments[1]);break;case 3:!function(e,t,n,r,i){if(t)e.call(n,r,i);else for(var o=e.length,a=v(e,o),u=0;u<o;++u)a[u].call(n,r,i)}(n,s,this,arguments[1],arguments[2]);break;case 4:!function(e,t,n,r,i,o){if(t)e.call(n,r,i,o);else for(var a=e.length,u=v(e,a),c=0;c<a;++c)u[c].call(n,r,i,o)}(n,s,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),o=1;o<r;o++)i[o-1]=arguments[o];!function(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,o=v(e,i),a=0;a<i;++a)o[a].apply(n,r)}(n,s,this,i)}return!0},r.prototype.on=r.prototype.addListener=function(e,t){return l(this,e,t,!1)},r.prototype.prependListener=function(e,t){return l(this,e,t,!0)},r.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,p(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,p(this,e,t)),this},r.prototype.removeListener=function(e,t){var n,r,i,o,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=c(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;0<=o;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),r.removeListener&&this.emit("removeListener",e,a||t)}return this},r.prototype.removeAllListeners=function(e){var t,n,r;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=c(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=c(null):delete n[e]),this;if(0===arguments.length){var i,o=a(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=c(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(r=t.length-1;0<=r;r--)this.removeListener(e,t[r]);return this},r.prototype.listeners=function(e){return d(this,e,!0)},r.prototype.rawListeners=function(e){return d(this,e,!1)},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):y.call(e,t)},r.prototype.listenerCount=y,r.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],2:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],3:[function(e,t,s){(function(i){function o(e,t){for(var n=0,r=e.length-1;0<=r;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function a(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}s.resolve=function(){for(var e="",t=!1,n=arguments.length-1;-1<=n&&!t;n--){var r=0<=n?arguments[n]:i.cwd();if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(e=r+"/"+e,t="/"===r.charAt(0))}return(t?"/":"")+(e=o(a(e.split("/"),function(e){return!!e}),!t).join("/"))||"."},s.normalize=function(e){var t=s.isAbsolute(e),n="/"===r(e,-1);return(e=o(a(e.split("/"),function(e){return!!e}),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},s.isAbsolute=function(e){return"/"===e.charAt(0)},s.join=function(){var e=Array.prototype.slice.call(arguments,0);return s.normalize(a(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},s.relative=function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;0<=n&&""===e[n];n--);return n<t?[]:e.slice(t,n-t+1)}e=s.resolve(e).substr(1),t=s.resolve(t).substr(1);for(var r=n(e.split("/")),i=n(t.split("/")),o=Math.min(r.length,i.length),a=o,u=0;u<o;u++)if(r[u]!==i[u]){a=u;break}var c=[];for(u=a;u<r.length;u++)c.push("..");return(c=c.concat(i.slice(a))).join("/")},s.sep="/",s.delimiter=":",s.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,i=!0,o=e.length-1;1<=o;--o)if(47===(t=e.charCodeAt(o))){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},s.basename=function(e,t){var n=function(e){"string"!=typeof e&&(e+="");var t,n=0,r=-1,i=!0;for(t=e.length-1;0<=t;--t)if(47===e.charCodeAt(t)){if(!i){n=t+1;break}}else-1===r&&(i=!1,r=t+1);return-1===r?"":e.slice(n,r)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},s.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,r=-1,i=!0,o=0,a=e.length-1;0<=a;--a){var u=e.charCodeAt(a);if(47===u){if(i)continue;n=a+1;break}-1===r&&(i=!1,r=a+1),46===u?-1===t?t=a:1!==o&&(o=1):-1!==t&&(o=-1)}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)};var r="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,e("_process"))},{_process:4}],4:[function(e,t,n){var r,i,o=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function c(t){if(r===setTimeout)return setTimeout(t,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{i="function"==typeof clearTimeout?clearTimeout:u}catch(e){i=u}}();var s,f=[],l=!1,h=-1;function p(){l&&s&&(l=!1,s.length?f=s.concat(f):h=-1,f.length&&d())}function d(){if(!l){var e=c(p);l=!0;for(var t=f.length;t;){for(s=f,f=[];++h<t;)s&&s[h].run();h=-1,t=f.length}s=null,l=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===u||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function y(e,t){this.fun=e,this.array=t}function v(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new y(e,t)),1!==f.length||l||c(d)},y.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],5:[function(c,e,s){(function(e,t){var r=c("process/browser.js").nextTick,n=Function.prototype.apply,i=Array.prototype.slice,o={},a=0;function u(e,t){this._id=e,this._clearFn=t}s.setTimeout=function(){return new u(n.call(setTimeout,window,arguments),clearTimeout)},s.setInterval=function(){return new u(n.call(setInterval,window,arguments),clearInterval)},s.clearTimeout=s.clearInterval=function(e){e.close()},u.prototype.unref=u.prototype.ref=function(){},u.prototype.close=function(){this._clearFn.call(window,this._id)},s.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},s.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},s._unrefActive=s.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},s.setImmediate="function"==typeof e?e:function(e){var t=a++,n=!(arguments.length<2)&&i.call(arguments,1);return o[t]=!0,r(function(){o[t]&&(n?e.apply(null,n):e.call(null),s.clearImmediate(t))}),t},s.clearImmediate="function"==typeof t?t:function(e){delete o[e]}}).call(this,c("timers").setImmediate,c("timers").clearImmediate)},{"process/browser.js":4,timers:5}],6:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],7:[function(h,e,I){(function(r,i){var u=/%[sdj%]/g;I.format=function(e){if(!w(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(c(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,o=String(e).replace(u,function(e){if("%%"===e)return"%";if(i<=n)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),a=r[n];n<i;a=r[++n])m(a)||!f(a)?o+=" "+a:o+=" "+c(a);return o},I.deprecate=function(e,t){if(_(i.process))return function(){return I.deprecate(e,t).apply(this,arguments)};if(!0===r.noDeprecation)return e;var n=!1;return function(){if(!n){if(r.throwDeprecation)throw new Error(t);r.traceDeprecation?console.trace(t):console.error(t),n=!0}return e.apply(this,arguments)}};var e,o={};function c(e,t){var n={seen:[],stylize:s};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),g(t)?n.showHidden=t:t&&I._extend(n,t),_(n.showHidden)&&(n.showHidden=!1),_(n.depth)&&(n.depth=2),_(n.colors)&&(n.colors=!1),_(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=a),p(n,e,n.depth)}function a(e,t){var n=c.styles[t];return n?"["+c.colors[n][0]+"m"+e+"["+c.colors[n][1]+"m":e}function s(e,t){return e}function p(t,n,r){if(t.customInspect&&n&&A(n.inspect)&&n.inspect!==I.inspect&&(!n.constructor||n.constructor.prototype!==n)){var e=n.inspect(r,t);return w(e)||(e=p(t,e,r)),e}var i=function(e,t){if(_(t))return e.stylize("undefined","undefined");if(w(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(b(t))return e.stylize(""+t,"number");if(g(t))return e.stylize(""+t,"boolean");if(m(t))return e.stylize("null","null")}(t,n);if(i)return i;var o,a=Object.keys(n),u=(o={},a.forEach(function(e,t){o[e]=!0}),o);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),E(n)&&(0<=a.indexOf("message")||0<=a.indexOf("description")))return d(n);if(0===a.length){if(A(n)){var c=n.name?": "+n.name:"";return t.stylize("[Function"+c+"]","special")}if(x(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(k(n))return t.stylize(Date.prototype.toString.call(n),"date");if(E(n))return d(n)}var s,f="",l=!1,h=["{","}"];(v(n)&&(l=!0,h=["[","]"]),A(n))&&(f=" [Function"+(n.name?": "+n.name:"")+"]");return x(n)&&(f=" "+RegExp.prototype.toString.call(n)),k(n)&&(f=" "+Date.prototype.toUTCString.call(n)),E(n)&&(f=" "+d(n)),0!==a.length||l&&0!=n.length?r<0?x(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),s=l?function(t,n,r,i,e){for(var o=[],a=0,u=n.length;a<u;++a)O(n,String(a))?o.push(y(t,n,r,i,String(a),!0)):o.push("");return e.forEach(function(e){e.match(/^\d+$/)||o.push(y(t,n,r,i,e,!0))}),o}(t,n,r,u,a):a.map(function(e){return y(t,n,r,u,e,l)}),t.seen.pop(),function(e,t,n){if(60<e.reduce(function(e,t){return 0,0<=t.indexOf("\n")&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0))return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(s,f,h)):h[0]+f+h[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function y(e,t,n,r,i,o){var a,u,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?u=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(u=e.stylize("[Setter]","special")),O(r,i)||(a="["+i+"]"),u||(e.seen.indexOf(c.value)<0?-1<(u=m(n)?p(e,c.value,null):p(e,c.value,n-1)).indexOf("\n")&&(u=o?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n")):u=e.stylize("[Circular]","special")),_(a)){if(o&&i.match(/^\d+$/))return u;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+u}function v(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function m(e){return null===e}function b(e){return"number"==typeof e}function w(e){return"string"==typeof e}function _(e){return void 0===e}function x(e){return f(e)&&"[object RegExp]"===t(e)}function f(e){return"object"==typeof e&&null!==e}function k(e){return f(e)&&"[object Date]"===t(e)}function E(e){return f(e)&&("[object Error]"===t(e)||e instanceof Error)}function A(e){return"function"==typeof e}function t(e){return Object.prototype.toString.call(e)}function n(e){return e<10?"0"+e.toString(10):e.toString(10)}I.debuglog=function(t){if(_(e)&&(e=r.env.NODE_DEBUG||""),t=t.toUpperCase(),!o[t])if(new RegExp("\\b"+t+"\\b","i").test(e)){var n=r.pid;o[t]=function(){var e=I.format.apply(I,arguments);console.error("%s %d: %s",t,n,e)}}else o[t]=function(){};return o[t]},(I.inspect=c).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},I.isArray=v,I.isBoolean=g,I.isNull=m,I.isNullOrUndefined=function(e){return null==e},I.isNumber=b,I.isString=w,I.isSymbol=function(e){return"symbol"==typeof e},I.isUndefined=_,I.isRegExp=x,I.isObject=f,I.isDate=k,I.isError=E,I.isFunction=A,I.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},I.isBuffer=h("./support/isBuffer");var l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}I.log=function(){var e,t;console.log("%s - %s",(e=new Date,t=[n(e.getHours()),n(e.getMinutes()),n(e.getSeconds())].join(":"),[e.getDate(),l[e.getMonth()],t].join(" ")),I.format.apply(I,arguments))},I.inherits=h("inherits"),I._extend=function(e,t){if(!t||!f(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,h("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":6,_process:4,inherits:2}],8:[function(e,t,n){var d=e("./model"),u=e("underscore");function r(e,t,n){this.db=e,this.query=t||{},n&&(this.execFn=n)}r.prototype.limit=function(e){return this._limit=e,this},r.prototype.skip=function(e){return this._skip=e,this},r.prototype.sort=function(e){return this._sort=e,this},r.prototype.projection=function(e){return this._projection=e,this},r.prototype.project=function(e){var r,i,o,a=[],t=this;return void 0===this._projection||0===Object.keys(this._projection).length?e:(r=0!==this._projection._id,this._projection=u.omit(this._projection,"_id"),(o=Object.keys(this._projection)).forEach(function(e){if(void 0!==i&&t._projection[e]!==i)throw new Error("Can't both keep and omit fields except for _id");i=t._projection[e]}),e.forEach(function(t){var n;1===i?(n={$set:{}},o.forEach(function(e){n.$set[e]=d.getDotValue(t,e),void 0===n.$set[e]&&delete n.$set[e]}),n=d.modify({},n)):(n={$unset:{}},o.forEach(function(e){n.$unset[e]=!0}),n=d.modify(t,n)),r?n._id=t._id:delete n._id,a.push(n)}),a)},r.prototype._exec=function(n){var i,a,u,c=[],s=0,f=0,l=this,h=null;function p(e,t){return l.execFn?l.execFn(e,t,n):n(e,t)}this.db.getCandidates(this.query,function(e,t){if(e)return p(e);try{for(i=0;i<t.length;i+=1)if(d.match(t[i],l.query))if(l._sort)c.push(t[i]);else if(l._skip&&l._skip>f)f+=1;else if(c.push(t[i]),s+=1,l._limit&&l._limit<=s)break}catch(e){return p(e)}if(l._sort){a=Object.keys(l._sort);var o=[];for(i=0;i<a.length;i++)u=a[i],o.push({key:u,direction:l._sort[u]});c.sort(function(e,t){var n,r,i;for(i=0;i<o.length;i++)if(0!==(r=(n=o[i]).direction*d.compareThings(d.getDotValue(e,n.key),d.getDotValue(t,n.key),l.db.compareStrings)))return r;return 0});var n=l._limit||c.length,r=l._skip||0;c=c.slice(r,r+n)}try{c=l.project(c)}catch(e){h=e,c=void 0}return p(h,c)})},r.prototype.exec=function(){this.db.executor.push({this:this,fn:this._exec,arguments:arguments})},t.exports=r},{"./model":13,underscore:22}],9:[function(e,t,n){t.exports.uid=function(e){return function(e){var t,n,r,i,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=e.length%3,u="";for(r=0,n=e.length-a;r<n;r+=3)t=(e[r]<<16)+(e[r+1]<<8)+e[r+2],u+=o[(i=t)>>18&63]+o[i>>12&63]+o[i>>6&63]+o[63&i];switch(a){case 1:t=e[e.length-1],u+=o[t>>2],u+=o[t<<4&63],u+="==";break;case 2:t=(e[e.length-2]<<8)+e[e.length-1],u+=o[t>>10],u+=o[t>>4&63],u+=o[t<<2&63],u+="="}return u}(function(e){for(var t,n=new Array(e),r=0;r<e;r++)0==(3&r)&&(t=4294967296*Math.random()),n[r]=t>>>((3&r)<<3)&255;return n}(Math.ceil(Math.max(8,2*e)))).replace(/[+\/]/g,"").slice(0,e)}},{}],10:[function(e,t,n){var r=e("./customUtils"),d=e("./model"),y=e("async"),i=e("./executor"),o=e("./indexes"),c=e("util"),v=e("underscore"),a=e("./persistence"),g=e("./cursor");function u(e){var t;"string"==typeof e?(t=e,this.inMemoryOnly=!1):(t=(e=e||{}).filename,this.inMemoryOnly=e.inMemoryOnly||!1,this.autoload=e.autoload||!1,this.timestampData=e.timestampData||!1),t&&"string"==typeof t&&0!==t.length?this.filename=t:(this.filename=null,this.inMemoryOnly=!0),this.compareStrings=e.compareStrings,this.persistence=new a({db:this,nodeWebkitAppName:e.nodeWebkitAppName,afterSerialization:e.afterSerialization,beforeDeserialization:e.beforeDeserialization,corruptAlertThreshold:e.corruptAlertThreshold}),this.executor=new i,this.inMemoryOnly&&(this.executor.ready=!0),this.indexes={},this.indexes._id=new o({fieldName:"_id",unique:!0}),this.ttlIndexes={},this.autoload&&this.loadDatabase(e.onload||function(e){if(e)throw e})}c.inherits(u,e("events").EventEmitter),u.prototype.loadDatabase=function(){this.executor.push({this:this.persistence,fn:this.persistence.loadDatabase,arguments:arguments},!0)},u.prototype.getAllData=function(){return this.indexes._id.getAll()},u.prototype.resetIndexes=function(t){var n=this;Object.keys(this.indexes).forEach(function(e){n.indexes[e].reset(t)})},u.prototype.ensureIndex=function(t,e){var n,r=e||function(){};if(!(t=t||{}).fieldName)return(n=new Error("Cannot create an index without a fieldName")).missingFieldName=!0,r(n);if(this.indexes[t.fieldName])return r(null);this.indexes[t.fieldName]=new o(t),void 0!==t.expireAfterSeconds&&(this.ttlIndexes[t.fieldName]=t.expireAfterSeconds);try{this.indexes[t.fieldName].insert(this.getAllData())}catch(e){return delete this.indexes[t.fieldName],r(e)}this.persistence.persistNewState([{$$indexCreated:t}],function(e){return r(e||null)})},u.prototype.removeIndex=function(e,t){var n=t||function(){};delete this.indexes[e],this.persistence.persistNewState([{$$indexRemoved:e}],function(e){return n(e||null)})},u.prototype.addToIndexes=function(e){var t,n,r,i=Object.keys(this.indexes);for(t=0;t<i.length;t+=1)try{this.indexes[i[t]].insert(e)}catch(e){n=t,r=e;break}if(r){for(t=0;t<n;t+=1)this.indexes[i[t]].remove(e);throw r}},u.prototype.removeFromIndexes=function(t){var n=this;Object.keys(this.indexes).forEach(function(e){n.indexes[e].remove(t)})},u.prototype.updateIndexes=function(e,t){var n,r,i,o=Object.keys(this.indexes);for(n=0;n<o.length;n+=1)try{this.indexes[o[n]].update(e,t)}catch(e){r=n,i=e;break}if(i){for(n=0;n<r;n+=1)this.indexes[o[n]].revertUpdate(e,t);throw i}},u.prototype.getCandidates=function(t,n,a){var r,i=Object.keys(this.indexes),u=this;"function"==typeof n&&(a=n,n=!1),y.waterfall([function(e){return r=[],Object.keys(t).forEach(function(e){("string"==typeof t[e]||"number"==typeof t[e]||"boolean"==typeof t[e]||c.isDate(t[e])||null===t[e])&&r.push(e)}),0<(r=v.intersection(r,i)).length?e(null,u.indexes[r[0]].getMatching(t[r[0]])):(r=[],Object.keys(t).forEach(function(e){t[e]&&t[e].hasOwnProperty("$in")&&r.push(e)}),0<(r=v.intersection(r,i)).length?e(null,u.indexes[r[0]].getMatching(t[r[0]].$in)):(r=[],Object.keys(t).forEach(function(e){t[e]&&(t[e].hasOwnProperty("$lt")||t[e].hasOwnProperty("$lte")||t[e].hasOwnProperty("$gt")||t[e].hasOwnProperty("$gte"))&&r.push(e)}),0<(r=v.intersection(r,i)).length?e(null,u.indexes[r[0]].getBetweenBounds(t[r[0]])):e(null,u.getAllData())))},function(e){if(n)return a(null,e);var r=[],i=[],o=Object.keys(u.ttlIndexes);e.forEach(function(t){var n=!0;o.forEach(function(e){void 0!==t[e]&&c.isDate(t[e])&&Date.now()>t[e].getTime()+1e3*u.ttlIndexes[e]&&(n=!1)}),n?i.push(t):r.push(t._id)}),y.eachSeries(r,function(e,t){u._remove({_id:e},{},function(e){return e?a(e):t()})},function(e){return a(null,i)})}])},u.prototype._insert=function(e,t){var n,r=t||function(){};try{n=this.prepareDocumentForInsertion(e),this._insertInCache(n)}catch(e){return r(e)}this.persistence.persistNewState(c.isArray(n)?n:[n],function(e){return e?r(e):r(null,d.deepCopy(n))})},u.prototype.createNewId=function(){var e=r.uid(16);return 0<this.indexes._id.getMatching(e).length&&(e=this.createNewId()),e},u.prototype.prepareDocumentForInsertion=function(e){var t,n=this;if(c.isArray(e))t=[],e.forEach(function(e){t.push(n.prepareDocumentForInsertion(e))});else{void 0===(t=d.deepCopy(e))._id&&(t._id=this.createNewId());var r=new Date;this.timestampData&&void 0===t.createdAt&&(t.createdAt=r),this.timestampData&&void 0===t.updatedAt&&(t.updatedAt=r),d.checkObject(t)}return t},u.prototype._insertInCache=function(e){c.isArray(e)?this._insertMultipleDocsInCache(e):this.addToIndexes(e)},u.prototype._insertMultipleDocsInCache=function(e){var t,n,r;for(t=0;t<e.length;t+=1)try{this.addToIndexes(e[t])}catch(e){r=e,n=t;break}if(r){for(t=0;t<n;t+=1)this.removeFromIndexes(e[t]);throw r}},u.prototype.insert=function(){this.executor.push({this:this,fn:this._insert,arguments:arguments})},u.prototype.count=function(e,t){var n=new g(this,e,function(e,t,n){return e?n(e):n(null,t.length)});if("function"!=typeof t)return n;n.exec(t)},u.prototype.find=function(e,t,n){switch(arguments.length){case 1:t={};break;case 2:"function"==typeof t&&(n=t,t={})}var r=new g(this,e,function(e,t,n){var r,i=[];if(e)return n(e);for(r=0;r<t.length;r+=1)i.push(d.deepCopy(t[r]));return n(null,i)});if(r.projection(t),"function"!=typeof n)return r;r.exec(n)},u.prototype.findOne=function(e,t,n){switch(arguments.length){case 1:t={};break;case 2:"function"==typeof t&&(n=t,t={})}var r=new g(this,e,function(e,t,n){return e?n(e):1===t.length?n(null,d.deepCopy(t[0])):n(null,null)});if(r.projection(t).limit(1),"function"!=typeof n)return r;r.exec(n)},u.prototype._update=function(a,u,c,e){var s,f,t,l,h=this,p=0;"function"==typeof c&&(e=c,c={}),s=e||function(){},f=void 0!==c.multi&&c.multi,t=void 0!==c.upsert&&c.upsert,y.waterfall([function(r){if(!t)return r();new g(h,a).limit(1)._exec(function(t,e){if(t)return s(t);if(1===e.length)return r();var n;try{d.checkObject(u),n=u}catch(e){try{n=d.modify(d.deepCopy(a,!0),u)}catch(t){return s(t)}}return h._insert(n,function(e,t){return e?s(e):s(null,1,t,!0)})})},function(){var r,i,o=[];h.getCandidates(a,function(e,t){if(e)return s(e);try{for(l=0;l<t.length;l+=1)d.match(t[l],a)&&(f||0===p)&&(p+=1,h.timestampData&&(i=t[l].createdAt),r=d.modify(t[l],u),h.timestampData&&(r.createdAt=i,r.updatedAt=new Date),o.push({oldDoc:t[l],newDoc:r}))}catch(e){return s(e)}try{h.updateIndexes(o)}catch(e){return s(e)}var n=v.pluck(o,"newDoc");h.persistence.persistNewState(n,function(e){if(e)return s(e);if(c.returnUpdatedDocs){var t=[];return n.forEach(function(e){t.push(d.deepCopy(e))}),f||(t=t[0]),s(null,p,t)}return s(null,p)})})}])},u.prototype.update=function(){this.executor.push({this:this,fn:this._update,arguments:arguments})},u.prototype._remove=function(n,e,t){var r,i,o=this,a=0,u=[];"function"==typeof e&&(t=e,e={}),r=t||function(){},i=void 0!==e.multi&&e.multi,this.getCandidates(n,!0,function(e,t){if(e)return r(e);try{t.forEach(function(e){d.match(e,n)&&(i||0===a)&&(a+=1,u.push({$$deleted:!0,_id:e._id}),o.removeFromIndexes(e))})}catch(e){return r(e)}o.persistence.persistNewState(u,function(e){return e?r(e):r(null,a)})})},u.prototype.remove=function(){this.executor.push({this:this,fn:this._remove,arguments:arguments})},t.exports=u},{"./cursor":8,"./customUtils":9,"./executor":11,"./indexes":12,"./model":13,"./persistence":14,async:16,events:1,underscore:22,util:7}],11:[function(n,r,e){(function(o,a){var e=n("async");function t(){this.buffer=[],this.ready=!1,this.queue=e.queue(function(e,t){for(var n=[],r=0;r<e.arguments.length;r+=1)n.push(e.arguments[r]);var i=e.arguments[e.arguments.length-1];"function"==typeof i?n[n.length-1]=function(){"function"==typeof a?a(t):o.nextTick(t),i.apply(null,arguments)}:i||0===e.arguments.length?n.push(function(){t()}):n[n.length-1]=function(){t()},e.fn.apply(e.this,n)},1)}t.prototype.push=function(e,t){this.ready||t?this.queue.push(e):this.buffer.push(e)},t.prototype.processBuffer=function(){var e;for(this.ready=!0,e=0;e<this.buffer.length;e+=1)this.queue.push(this.buffer[e]);this.buffer=[]},r.exports=t}).call(this,n("_process"),n("timers").setImmediate)},{_process:4,async:16,timers:5}],12:[function(e,t,n){var r=e("binary-search-tree").AVLTree,a=e("./model"),u=e("underscore"),c=e("util");function i(e,t){return e===t}function s(e){return null===e?"$null":"string"==typeof e?"$string"+e:"boolean"==typeof e?"$boolean"+e:"number"==typeof e?"$number"+e:c.isArray(e)?"$date"+e.getTime():e}function o(e){this.fieldName=e.fieldName,this.unique=e.unique||!1,this.sparse=e.sparse||!1,this.treeOptions={unique:this.unique,compareKeys:a.compareThings,checkValueEquality:i},this.reset()}o.prototype.reset=function(e){this.tree=new r(this.treeOptions),e&&this.insert(e)},o.prototype.insert=function(e){var t,n,r,i,o;if(c.isArray(e))this.insertMultipleDocs(e);else if(void 0!==(t=a.getDotValue(e,this.fieldName))||!this.sparse)if(c.isArray(t)){for(n=u.uniq(t,s),r=0;r<n.length;r+=1)try{this.tree.insert(n[r],e)}catch(e){o=e,i=r;break}if(o){for(r=0;r<i;r+=1)this.tree.delete(n[r],e);throw o}}else this.tree.insert(t,e)},o.prototype.insertMultipleDocs=function(e){var t,n,r;for(t=0;t<e.length;t+=1)try{this.insert(e[t])}catch(e){n=e,r=t;break}if(n){for(t=0;t<r;t+=1)this.remove(e[t]);throw n}},o.prototype.remove=function(t){var e,n=this;c.isArray(t)?t.forEach(function(e){n.remove(e)}):void 0===(e=a.getDotValue(t,this.fieldName))&&this.sparse||(c.isArray(e)?u.uniq(e,s).forEach(function(e){n.tree.delete(e,t)}):this.tree.delete(e,t))},o.prototype.update=function(t,e){if(c.isArray(t))this.updateMultipleDocs(t);else{this.remove(t);try{this.insert(e)}catch(e){throw this.insert(t),e}}},o.prototype.updateMultipleDocs=function(e){var t,n,r;for(t=0;t<e.length;t+=1)this.remove(e[t].oldDoc);for(t=0;t<e.length;t+=1)try{this.insert(e[t].newDoc)}catch(e){r=e,n=t;break}if(r){for(t=0;t<n;t+=1)this.remove(e[t].newDoc);for(t=0;t<e.length;t+=1)this.insert(e[t].oldDoc);throw r}},o.prototype.revertUpdate=function(e,t){var n=[];c.isArray(e)?(e.forEach(function(e){n.push({oldDoc:e.newDoc,newDoc:e.oldDoc})}),this.update(n)):this.update(t,e)},o.prototype.getMatching=function(e){var t=this;if(c.isArray(e)){var n={},r=[];return e.forEach(function(e){t.getMatching(e).forEach(function(e){n[e._id]=e})}),Object.keys(n).forEach(function(e){r.push(n[e])}),r}return t.tree.search(e)},o.prototype.getBetweenBounds=function(e){return this.tree.betweenBounds(e)},o.prototype.getAll=function(){var n=[];return this.tree.executeOnEveryNode(function(e){var t;for(t=0;t<e.data.length;t+=1)n.push(e.data[t])}),n},t.exports=o},{"./model":13,"binary-search-tree":17,underscore:22,util:7}],13:[function(e,t,n){var s=e("util"),f=e("underscore"),u={},o={},l={},a={},h={};function r(e,t){if("number"==typeof e&&(e=e.toString()),!("$"!==e[0]||"$$date"===e&&"number"==typeof t||"$$deleted"===e&&!0===t||"$$indexCreated"===e||"$$indexRemoved"===e))throw new Error("Field names cannot begin with the $ character");if(-1!==e.indexOf("."))throw new Error("Field names cannot contain a .")}function c(t){s.isArray(t)&&t.forEach(function(e){c(e)}),"object"==typeof t&&null!==t&&Object.keys(t).forEach(function(e){r(e,t[e]),c(t[e])})}function p(t,n){var r;return"boolean"==typeof t||"number"==typeof t||"string"==typeof t||null===t||s.isDate(t)?t:s.isArray(t)?(r=[],t.forEach(function(e){r.push(p(e,n))}),r):"object"==typeof t?(r={},Object.keys(t).forEach(function(e){(!n||"$"!==e[0]&&-1===e.indexOf("."))&&(r[e]=p(t[e],n))}),r):void 0}function d(e){return"boolean"==typeof e||"number"==typeof e||"string"==typeof e||null===e||s.isDate(e)||s.isArray(e)}function y(e,t){return e<t?-1:t<e?1:0}function v(e,t){var n,r;for(n=0;n<Math.min(e.length,t.length);n+=1)if(0!==(r=g(e[n],t[n])))return r;return y(e.length,t.length)}function g(e,t,n){var r,i,o,a,u=n||y;if(void 0===e)return void 0===t?0:-1;if(void 0===t)return void 0===e?0:1;if(null===e)return null===t?0:-1;if(null===t)return null===e?0:1;if("number"==typeof e)return"number"==typeof t?y(e,t):-1;if("number"==typeof t)return"number"==typeof e?y(e,t):1;if("string"==typeof e)return"string"==typeof t?u(e,t):-1;if("string"==typeof t)return"string"==typeof e?u(e,t):1;if("boolean"==typeof e)return"boolean"==typeof t?y(e,t):-1;if("boolean"==typeof t)return"boolean"==typeof e?y(e,t):1;if(s.isDate(e))return s.isDate(t)?y(e.getTime(),t.getTime()):-1;if(s.isDate(t))return s.isDate(e)?y(e.getTime(),t.getTime()):1;if(s.isArray(e))return s.isArray(t)?v(e,t):-1;if(s.isArray(t))return s.isArray(e)?v(e,t):1;for(r=Object.keys(e).sort(),i=Object.keys(t).sort(),a=0;a<Math.min(r.length,i.length);a+=1)if(0!==(o=g(e[r[a]],t[i[a]])))return o;return y(r.length,i.length)}function m(e,t){var n,r,i="string"==typeof t?t.split("."):t;if(e){if(0===i.length)return e;if(1===i.length)return e[i[0]];if(s.isArray(e[i[0]])){if("number"==typeof(n=parseInt(i[1],10))&&!isNaN(n))return m(e[i[0]][n],i.slice(2));for(r=new Array,n=0;n<e[i[0]].length;n+=1)r.push(m(e[i[0]][n],i.slice(1)));return r}return m(e[i[0]],i.slice(1))}}function b(e,t){var n,r,i;if(null===e||"string"==typeof e||"boolean"==typeof e||"number"==typeof e||null===t||"string"==typeof t||"boolean"==typeof t||"number"==typeof t)return e===t;if(s.isDate(e)||s.isDate(t))return s.isDate(e)&&s.isDate(t)&&e.getTime()===t.getTime();if((!s.isArray(e)||!s.isArray(t))&&(s.isArray(e)||s.isArray(t))||void 0===e||void 0===t)return!1;try{n=Object.keys(e),r=Object.keys(t)}catch(e){return!1}if(n.length!==r.length)return!1;for(i=0;i<n.length;i+=1){if(-1===r.indexOf(n[i]))return!1;if(!b(e[n[i]],t[n[i]]))return!1}return!0}function i(e,t){return!("string"!=typeof e&&"number"!=typeof e&&!s.isDate(e)&&"string"!=typeof t&&"number"!=typeof t&&!s.isDate(t))&&typeof e==typeof t}function w(e,t){var n,r,i,o;if(d(e)||d(t))return _({needAKey:e},"needAKey",t);for(n=Object.keys(t),o=0;o<n.length;o+=1)if(i=t[r=n[o]],"$"===r[0]){if(!a[r])throw new Error("Unknown logical operator "+r);if(!a[r](e,i))return!1}else if(!_(e,r,i))return!1;return!0}function _(e,t,n,r){var i,o,a,u,c=m(e,t);if(s.isArray(c)&&!r){if(s.isArray(n))return _(e,t,n,!0);if(null!==n&&"object"==typeof n&&!s.isRegExp(n))for(o=Object.keys(n),i=0;i<o.length;i+=1)if(h[o[i]])return _(e,t,n,!0);for(i=0;i<c.length;i+=1)if(_({k:c[i]},"k",n))return!0;return!1}if(null!==n&&"object"==typeof n&&!s.isRegExp(n)&&!s.isArray(n)){if(o=Object.keys(n),a=f.map(o,function(e){return e[0]}),0!==(u=f.filter(a,function(e){return"$"===e})).length&&u.length!==a.length)throw new Error("You cannot mix operators and normal fields");if(0<u.length){for(i=0;i<o.length;i+=1){if(!l[o[i]])throw new Error("Unknown comparison function "+o[i]);if(!l[o[i]](c,n[o[i]]))return!1}return!0}}return s.isRegExp(n)?l.$regex(c,n):!!b(c,n)}o.$set=function(e,t,n){e[t]=n},o.$unset=function(e,t,n){delete e[t]},o.$push=function(t,n,e){if(t.hasOwnProperty(n)||(t[n]=[]),!s.isArray(t[n]))throw new Error("Can't $push an element on non-array values");if(null!==e&&"object"==typeof e&&e.$slice&&void 0===e.$each&&(e.$each=[]),null!==e&&"object"==typeof e&&e.$each){if(3<=Object.keys(e).length||2===Object.keys(e).length&&void 0===e.$slice)throw new Error("Can only use $slice in cunjunction with $each when $push to array");if(!s.isArray(e.$each))throw new Error("$each requires an array value");if(e.$each.forEach(function(e){t[n].push(e)}),void 0===e.$slice||"number"!=typeof e.$slice)return;if(0===e.$slice)t[n]=[];else{var r,i,o=t[n].length;e.$slice<0?(r=Math.max(0,o+e.$slice),i=o):0<e.$slice&&(r=0,i=Math.min(o,e.$slice)),t[n]=t[n].slice(r,i)}}else t[n].push(e)},o.$addToSet=function(t,n,r){var i=!0;if(t.hasOwnProperty(n)||(t[n]=[]),!s.isArray(t[n]))throw new Error("Can't $addToSet an element on non-array values");if(null!==r&&"object"==typeof r&&r.$each){if(1<Object.keys(r).length)throw new Error("Can't use another field in conjunction with $each");if(!s.isArray(r.$each))throw new Error("$each requires an array value");r.$each.forEach(function(e){o.$addToSet(t,n,e)})}else t[n].forEach(function(e){0===g(e,r)&&(i=!1)}),i&&t[n].push(r)},o.$pop=function(e,t,n){if(!s.isArray(e[t]))throw new Error("Can't $pop an element from non-array values");if("number"!=typeof n)throw new Error(n+" isn't an integer, can't use it with $pop");0!==n&&(e[t]=0<n?e[t].slice(0,e[t].length-1):e[t].slice(1))},o.$pull=function(e,t,n){var r,i;if(!s.isArray(e[t]))throw new Error("Can't $pull an element from non-array values");for(i=(r=e[t]).length-1;0<=i;i-=1)w(r[i],n)&&r.splice(i,1)},o.$inc=function(e,t,n){if("number"!=typeof n)throw new Error(n+" must be a number");if("number"!=typeof e[t]){if(f.has(e,t))throw new Error("Don't use the $inc modifier on non-number fields");e[t]=n}else e[t]+=n},o.$max=function(e,t,n){void 0===e[t]?e[t]=n:n>e[t]&&(e[t]=n)},o.$min=function(e,t,n){void 0===e[t]?e[t]=n:n<e[t]&&(e[t]=n)},Object.keys(o).forEach(function(e){var i;u[e]=(i=e,function(e,t,n){var r="string"==typeof t?t.split("."):t;if(1===r.length)o[i](e,t,n);else{if(void 0===e[r[0]]){if("$unset"===i)return;e[r[0]]={}}u[i](e[r[0]],r.slice(1),n)}})}),l.$lt=function(e,t){return i(e,t)&&e<t},l.$lte=function(e,t){return i(e,t)&&e<=t},l.$gt=function(e,t){return i(e,t)&&t<e},l.$gte=function(e,t){return i(e,t)&&t<=e},l.$ne=function(e,t){return void 0===e||!b(e,t)},l.$in=function(e,t){var n;if(!s.isArray(t))throw new Error("$in operator called with a non-array");for(n=0;n<t.length;n+=1)if(b(e,t[n]))return!0;return!1},l.$nin=function(e,t){if(!s.isArray(t))throw new Error("$nin operator called with a non-array");return!l.$in(e,t)},l.$regex=function(e,t){if(!s.isRegExp(t))throw new Error("$regex operator called with non regular expression");return"string"==typeof e&&t.test(e)},l.$exists=function(e,t){return t=!(!t&&""!==t),void 0===e?!t:t},l.$size=function(e,t){if(!s.isArray(e))return!1;if(t%1!=0)throw new Error("$size operator called without an integer");return e.length==t},l.$elemMatch=function(e,t){if(!s.isArray(e))return!1;for(var n=e.length,r=!1;n--;)if(w(e[n],t)){r=!0;break}return r},h.$size=!0,h.$elemMatch=!0,a.$or=function(e,t){var n;if(!s.isArray(t))throw new Error("$or operator used without an array");for(n=0;n<t.length;n+=1)if(w(e,t[n]))return!0;return!1},a.$and=function(e,t){var n;if(!s.isArray(t))throw new Error("$and operator used without an array");for(n=0;n<t.length;n+=1)if(!w(e,t[n]))return!1;return!0},a.$not=function(e,t){return!w(e,t)},a.$where=function(e,t){var n;if(!f.isFunction(t))throw new Error("$where operator used without a function");if(n=t.call(e),!f.isBoolean(n))throw new Error("$where function must return boolean");return n},t.exports.serialize=function(e){return JSON.stringify(e,function(e,t){if(r(e,t),void 0!==t)return null===t?null:"function"==typeof this[e].getTime?{$$date:this[e].getTime()}:t})},t.exports.deserialize=function(e){return JSON.parse(e,function(e,t){return"$$date"===e?new Date(t):"string"==typeof t||"number"==typeof t||"boolean"==typeof t||null===t?t:t&&t.$$date?t.$$date:t})},t.exports.deepCopy=p,t.exports.checkObject=c,t.exports.isPrimitiveType=d,t.exports.modify=function(e,n){var r,t,i=Object.keys(n),o=f.map(i,function(e){return e[0]}),a=f.filter(o,function(e){return"$"===e});if(-1!==i.indexOf("_id")&&n._id!==e._id)throw new Error("You cannot change a document's _id");if(0!==a.length&&a.length!==o.length)throw new Error("You cannot mix modifiers and normal fields");if(0===a.length?(r=p(n))._id=e._id:(t=f.uniq(i),r=p(e),t.forEach(function(t){if(!u[t])throw new Error("Unknown modifier "+t);if("object"!=typeof n[t])throw new Error("Modifier "+t+"'s argument must be an object");Object.keys(n[t]).forEach(function(e){u[t](r,e,n[t][e])})})),c(r),e._id!==r._id)throw new Error("You can't change a document's _id");return r},t.exports.getDotValue=m,t.exports.match=w,t.exports.areThingsEqual=b,t.exports.compareThings=g},{underscore:22,util:7}],14:[function(e,t,n){(function(r){var o=e("./storage"),a=e("path"),c=e("./model"),n=e("async"),i=e("./customUtils"),u=e("./indexes");function s(e){var t,n,r;if(this.db=e.db,this.inMemoryOnly=this.db.inMemoryOnly,this.filename=this.db.filename,this.corruptAlertThreshold=void 0!==e.corruptAlertThreshold?e.corruptAlertThreshold:.1,!this.inMemoryOnly&&this.filename&&"~"===this.filename.charAt(this.filename.length-1))throw new Error("The datafile name can't end with a ~, which is reserved for crash safe backup files");if(e.afterSerialization&&!e.beforeDeserialization)throw new Error("Serialization hook defined but deserialization hook undefined, cautiously refusing to start PwDB to prevent dataloss");if(!e.afterSerialization&&e.beforeDeserialization)throw new Error("Serialization hook undefined but deserialization hook defined, cautiously refusing to start PwDB to prevent dataloss");for(this.afterSerialization=e.afterSerialization||function(e){return e},this.beforeDeserialization=e.beforeDeserialization||function(e){return e},t=1;t<30;t+=1)for(n=0;n<10;n+=1)if(r=i.uid(t),this.beforeDeserialization(this.afterSerialization(r))!==r)throw new Error("beforeDeserialization is not the reverse of afterSerialization, cautiously refusing to start PwDB to prevent dataloss");this.filename&&e.nodeWebkitAppName&&(console.log("=================================================================="),console.log("WARNING: The nodeWebkitAppName option is deprecated"),console.log("To get the path to the directory where Node Webkit stores the data"),console.log("for your app, use the internal nw.gui module like this"),console.log("require('nw.gui').App.dataPath"),console.log("See https://github.com/rogerwang/node-webkit/issues/500"),console.log("=================================================================="),this.filename=s.getNWAppFilename(e.nodeWebkitAppName,this.filename))}s.ensureDirectoryExists=function(e,t){var n=t||function(){};o.mkdirp(e,function(e){return n(e)})},s.getNWAppFilename=function(e,t){var n;switch(r.platform){case"win32":case"win64":if(!(n=r.env.LOCALAPPDATA||r.env.APPDATA))throw new Error("Couldn't find the base application data folder");n=a.join(n,e);break;case"darwin":if(!(n=r.env.HOME))throw new Error("Couldn't find the base application data directory");n=a.join(n,"Library","Application Support",e);break;case"linux":if(!(n=r.env.HOME))throw new Error("Couldn't find the base application data directory");n=a.join(n,".config",e);break;default:throw new Error("Can't use the Node Webkit relative path for platform "+r.platform)}return a.join(n,"pwdb-data",t)},s.prototype.persistCachedDatabase=function(e){var t=e||function(){},n="",r=this;if(this.inMemoryOnly)return t(null);this.db.getAllData().forEach(function(e){n+=r.afterSerialization(c.serialize(e))+"\n"}),Object.keys(this.db.indexes).forEach(function(e){"_id"!=e&&(n+=r.afterSerialization(c.serialize({$$indexCreated:{fieldName:e,unique:r.db.indexes[e].unique,sparse:r.db.indexes[e].sparse}}))+"\n")}),o.crashSafeWriteFile(this.filename,n,function(e){return e?t(e):(r.db.emit("compaction.done"),t(null))})},s.prototype.compactDatafile=function(){this.db.executor.push({this:this,fn:this.persistCachedDatabase,arguments:[]})},s.prototype.setAutocompactionInterval=function(e){var t=this,n=Math.max(e||0,5e3);this.stopAutocompaction(),this.autocompactionIntervalId=setInterval(function(){t.compactDatafile()},n)},s.prototype.stopAutocompaction=function(){this.autocompactionIntervalId&&clearInterval(this.autocompactionIntervalId)},s.prototype.persistNewState=function(e,t){var n=this,r="",i=t||function(){};return n.inMemoryOnly?i(null):(e.forEach(function(e){r+=n.afterSerialization(c.serialize(e))+"\n"}),0===r.length?i(null):void o.appendFile(n.filename,r,"utf8",function(e){return i(e)}))},s.prototype.treatRawData=function(e){var t,n=e.split("\n"),r={},i=[],o={},a=-1;for(t=0;t<n.length;t+=1){var u;try{(u=c.deserialize(this.beforeDeserialization(n[t])))._id?!0===u.$$deleted?delete r[u._id]:r[u._id]=u:u.$$indexCreated&&null!=u.$$indexCreated.fieldName?o[u.$$indexCreated.fieldName]=u.$$indexCreated:"string"==typeof u.$$indexRemoved&&delete o[u.$$indexRemoved]}catch(e){a+=1}}if(0<n.length&&a/n.length>this.corruptAlertThreshold)throw new Error("More than "+Math.floor(100*this.corruptAlertThreshold)+"% of the data file is corrupt, the wrong beforeDeserialization hook may be used. Cautiously refusing to start PwDB to prevent dataloss");return Object.keys(r).forEach(function(e){i.push(r[e])}),{data:i,indexes:o}},s.prototype.loadDatabase=function(e){var t=e||function(){},i=this;if(i.db.resetIndexes(),i.inMemoryOnly)return t(null);n.waterfall([function(r){s.ensureDirectoryExists(a.dirname(i.filename),function(e){o.ensureDatafileIntegrity(i.filename,function(e){o.readFile(i.filename,"utf8",function(e,t){if(e)return r(e);try{var n=i.treatRawData(t)}catch(e){return r(e)}Object.keys(n.indexes).forEach(function(e){i.db.indexes[e]=new u(n.indexes[e])});try{i.db.resetIndexes(n.data)}catch(e){return i.db.resetIndexes(),r(e)}i.db.persistence.persistCachedDatabase(r)})})})}],function(e){return e?t(e):(i.db.executor.processBuffer(),t(null))})},t.exports=s}).call(this,e("_process"))},{"./customUtils":9,"./indexes":12,"./model":13,"./storage":15,_process:4,async:16,path:3}],15:[function(e,t,n){var o=e("localforage");function r(e,t,n,r){"function"==typeof n&&(r=n),o.setItem(e,t,function(){return r()})}o.config({name:"PwDB",storeName:"pwdbdata"}),t.exports.exists=function(e,n){o.getItem(e,function(e,t){return n(null!==t)})},t.exports.rename=function(n,r,i){o.getItem(n,function(e,t){null===t?o.removeItem(r,function(){return i()}):o.setItem(r,t,function(){o.removeItem(n,function(){return i()})})})},t.exports.writeFile=r,t.exports.crashSafeWriteFile=r,t.exports.appendFile=function(n,r,e,i){"function"==typeof e&&(i=e),o.getItem(n,function(e,t){t=t||"",t+=r,o.setItem(n,t,function(){return i()})})},t.exports.readFile=function(e,t,n){"function"==typeof t&&(n=t),o.getItem(e,function(e,t){return n(null,t||"")})},t.exports.unlink=function(e,t){o.removeItem(e,function(){return t()})},t.exports.mkdirp=function(e,t){return t()},t.exports.ensureDatafileIntegrity=function(e,t){return t(null)}},{localforage:21}],16:[function(e,_,t){(function(b,w){!function(){var n,e,h={};function u(e){var t=!1;return function(){if(t)throw new Error("Callback was already called.");t=!0,e.apply(n,arguments)}}null!=(n=this)&&(e=n.async),h.noConflict=function(){return n.async=e,h};var p=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n+=1)t(e[n],n,e)},c=function(e,r){if(e.map)return e.map(r);var i=[];return p(e,function(e,t,n){i.push(r(e,t,n))}),i},d=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};void 0!==b&&b.nextTick?(h.nextTick=b.nextTick,h.setImmediate=void 0!==w?function(e){w(e)}:h.nextTick):(h.nextTick="function"==typeof w?function(e){w(e)}:function(e){setTimeout(e,0)},h.setImmediate=h.nextTick),h.each=function(t,n,r){if(r=r||function(){},!t.length)return r();var i=0;p(t,function(e){n(e,u(function(e){e?(r(e),r=function(){}):(i+=1)>=t.length&&r(null)}))})},h.forEach=h.each,h.eachSeries=function(t,e,n){if(n=n||function(){},!t.length)return n();var r=0,i=function(){e(t[r],function(e){e?(n(e),n=function(){}):(r+=1)>=t.length?n(null):i()})};i()},h.forEachSeries=h.eachSeries,h.eachLimit=function(e,t,n,r){i(t).apply(null,[e,n,r])},h.forEachLimit=h.eachLimit;var i=function(u){return function(n,e,r){if(r=r||function(){},!n.length||u<=0)return r();var i=0,o=0,a=0;!function t(){if(i>=n.length)return r();for(;a<u&&o<n.length;)a+=1,e(n[(o+=1)-1],function(e){e?(r(e),r=function(){}):(a-=1,(i+=1)>=n.length?r():t())})}()}},t=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[h.each].concat(e))}},r=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[h.eachSeries].concat(e))}},o=function(e,t,i,n){var o=[];e(t=c(t,function(e,t){return{index:t,value:e}}),function(n,r){i(n.value,function(e,t){o[n.index]=t,r(e)})},function(e){n(e,o)})};h.map=t(o),h.mapSeries=r(o),h.mapLimit=function(e,t,n,r){return a(t)(e,n,r)};var a=function(e){return t=e,n=o,function(){var e=Array.prototype.slice.call(arguments);return n.apply(null,[i(t)].concat(e))};var t,n};h.reduce=function(e,r,t,n){h.eachSeries(e,function(e,n){t(r,e,function(e,t){r=t,n(e)})},function(e){n(e,r)})},h.inject=h.reduce,h.foldl=h.reduce,h.reduceRight=function(e,t,n,r){var i=c(e,function(e){return e}).reverse();h.reduce(i,t,n,r)},h.foldr=h.reduceRight;var s=function(e,t,r,n){var i=[];e(t=c(t,function(e,t){return{index:t,value:e}}),function(t,n){r(t.value,function(e){e&&i.push(t),n()})},function(e){n(c(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};h.filter=t(s),h.filterSeries=r(s),h.select=h.filter,h.selectSeries=h.filterSeries;var f=function(e,t,r,n){var i=[];e(t=c(t,function(e,t){return{index:t,value:e}}),function(t,n){r(t.value,function(e){e||i.push(t),n()})},function(e){n(c(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};h.reject=t(f),h.rejectSeries=r(f);var l=function(e,t,r,i){e(t,function(t,n){r(t,function(e){e?(i(t),i=function(){}):n()})},function(e){i()})};h.detect=t(l),h.detectSeries=r(l),h.some=function(e,n,r){h.each(e,function(e,t){n(e,function(e){e&&(r(!0),r=function(){}),t()})},function(e){r(!1)})},h.any=h.some,h.every=function(e,n,r){h.each(e,function(e,t){n(e,function(e){e||(r(!1),r=function(){}),t()})},function(e){r(!0)})},h.all=h.every,h.sortBy=function(e,t,n){h.map(e,function(n,r){t(n,function(e,t){e?r(e):r(null,{value:n,criteria:t})})},function(e,t){if(e)return n(e);n(null,c(t.sort(function(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:r<n?1:0}),function(e){return e.value}))})},h.auto=function(a,u){u=u||function(){};var e=d(a);if(!e.length)return u(null);var c={},s=[],f=function(e){s.unshift(e)},l=function(){p(s.slice(0),function(e){e()})};f(function(){d(c).length===e.length&&(u(null,c),u=function(){})}),p(e,function(o){var e=a[o]instanceof Function?[a[o]]:a[o],t=function(e){var t=Array.prototype.slice.call(arguments,1);if(t.length<=1&&(t=t[0]),e){var n={};p(d(c),function(e){n[e]=c[e]}),n[o]=t,u(e,n),u=function(){}}else c[o]=t,h.setImmediate(l)},n=e.slice(0,Math.abs(e.length-1))||[],r=function(){return r=function(e,t){return e&&c.hasOwnProperty(t)},i=!0,((e=n).reduce?e.reduce(r,i):(p(e,function(e,t,n){i=r(i,e,t,n)}),i))&&!c.hasOwnProperty(o);var e,r,i};if(r())e[e.length-1](t,c);else{var i=function(){r()&&(!function(e){for(var t=0;t<s.length;t+=1)if(s[t]===e)return s.splice(t,1)}(i),e[e.length-1](t,c))};f(i)}})},h.waterfall=function(e,i){if(i=i||function(){},e.constructor!==Array){var t=new Error("First argument to waterfall must be an array of functions");return i(t)}if(!e.length)return i();var o=function(r){return function(e){if(e)i.apply(null,arguments),i=function(){};else{var t=Array.prototype.slice.call(arguments,1),n=r.next();n?t.push(o(n)):t.push(i),h.setImmediate(function(){r.apply(null,t)})}}};o(h.iterator(e))()};var y=function(e,t,n){if(n=n||function(){},t.constructor===Array)e.map(t,function(e,n){e&&e(function(e){var t=Array.prototype.slice.call(arguments,1);t.length<=1&&(t=t[0]),n.call(null,e,t)})},n);else{var i={};e.each(d(t),function(n,r){t[n](function(e){var t=Array.prototype.slice.call(arguments,1);t.length<=1&&(t=t[0]),i[n]=t,r(e)})},function(e){n(e,i)})}};h.parallel=function(e,t){y({map:h.map,each:h.each},e,t)},h.parallelLimit=function(e,t,n){y({map:a(t),each:i(t)},e,n)},h.series=function(e,t){if(t=t||function(){},e.constructor===Array)h.mapSeries(e,function(e,n){e&&e(function(e){var t=Array.prototype.slice.call(arguments,1);t.length<=1&&(t=t[0]),n.call(null,e,t)})},t);else{var i={};h.eachSeries(d(e),function(n,r){e[n](function(e){var t=Array.prototype.slice.call(arguments,1);t.length<=1&&(t=t[0]),i[n]=t,r(e)})},function(e){t(e,i)})}},h.iterator=function(n){var r=function(e){var t=function(){return n.length&&n[e].apply(null,arguments),t.next()};return t.next=function(){return e<n.length-1?r(e+1):null},t};return r(0)},h.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var v=function(e,t,r,n){var i=[];e(t,function(e,n){r(e,function(e,t){i=i.concat(t||[]),n(e)})},function(e){n(e,i)})};h.concat=t(v),h.concatSeries=r(v),h.whilst=function(t,n,r){t()?n(function(e){if(e)return r(e);h.whilst(t,n,r)}):r()},h.doWhilst=function(t,n,r){t(function(e){if(e)return r(e);n()?h.doWhilst(t,n,r):r()})},h.until=function(t,n,r){t()?r():n(function(e){if(e)return r(e);h.until(t,n,r)})},h.doUntil=function(t,n,r){t(function(e){if(e)return r(e);n()?r():h.doUntil(t,n,r)})},h.queue=function(n,o){function r(n,e,r,i){e.constructor!==Array&&(e=[e]),p(e,function(e){var t={data:e,callback:"function"==typeof i?i:null};r?n.tasks.unshift(t):n.tasks.push(t),n.saturated&&n.tasks.length===o&&n.saturated(),h.setImmediate(n.process)})}void 0===o&&(o=1);var i=0,a={tasks:[],concurrency:o,saturated:null,empty:null,drain:null,push:function(e,t){r(a,e,!1,t)},unshift:function(e,t){r(a,e,!0,t)},process:function(){if(i<a.concurrency&&a.tasks.length){var e=a.tasks.shift();a.empty&&0===a.tasks.length&&a.empty(),i+=1;var t=u(function(){i-=1,e.callback&&e.callback.apply(e,arguments),a.drain&&a.tasks.length+i===0&&a.drain(),a.process()});n(e.data,t)}},length:function(){return a.tasks.length},running:function(){return i}};return a},h.cargo=function(r,i){var o=!1,a=[],u={tasks:a,payload:i,saturated:null,empty:null,drain:null,push:function(e,t){e.constructor!==Array&&(e=[e]),p(e,function(e){a.push({data:e,callback:"function"==typeof t?t:null}),u.saturated&&a.length===i&&u.saturated()}),h.setImmediate(u.process)},process:function e(){if(!o)if(0!==a.length){var n="number"==typeof i?a.splice(0,i):a.splice(0),t=c(n,function(e){return e.data});u.empty&&u.empty(),o=!0,r(t,function(){o=!1;var t=arguments;p(n,function(e){e.callback&&e.callback.apply(null,t)}),e()})}else u.drain&&u.drain()},length:function(){return a.length},running:function(){return o}};return u};var g=function(n){return function(e){var t=Array.prototype.slice.call(arguments,1);e.apply(null,t.concat([function(e){var t=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(e?console.error&&console.error(e):console[n]&&p(t,function(e){console[n](e)}))}]))}};h.log=g("log"),h.dir=g("dir"),h.memoize=function(n,i){var o={},a={};i=i||function(e){return e};var e=function(){var e=Array.prototype.slice.call(arguments),t=e.pop(),r=i.apply(null,e);r in o?t.apply(null,o[r]):r in a?a[r].push(t):(a[r]=[t],n.apply(null,e.concat([function(){o[r]=arguments;var e=a[r];delete a[r];for(var t=0,n=e.length;t<n;t++)e[t].apply(null,arguments)}])))};return e.memo=o,e.unmemoized=n,e},h.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},h.times=function(e,t,n){for(var r=[],i=0;i<e;i++)r.push(i);return h.map(r,t,n)},h.timesSeries=function(e,t,n){for(var r=[],i=0;i<e;i++)r.push(i);return h.mapSeries(r,t,n)},h.compose=function(){var t=Array.prototype.reverse.call(arguments);return function(){var r=this,e=Array.prototype.slice.call(arguments),n=e.pop();h.reduce(t,e,function(e,t,n){t.apply(r,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);n(e,t)}]))},function(e,t){n.apply(r,[e].concat(t))})}};var m=function(t,i){var e=function(){var n=this,r=Array.prototype.slice.call(arguments),e=r.pop();return t(i,function(e,t){e.apply(n,r.concat([t]))},e)};if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return e.apply(this,n)}return e};h.applyEach=t(m),h.applyEachSeries=r(m),h.forever=function(n,r){!function e(t){if(t){if(r)return r(t);throw t}n(e)}()},"undefined"!=typeof define&&define.amd?define([],function(){return h}):void 0!==_&&_.exports?_.exports=h:n.async=h}()}).call(this,e("_process"),e("timers").setImmediate)},{_process:4,timers:5}],17:[function(e,t,n){t.exports.BinarySearchTree=e("./lib/bst"),t.exports.AVLTree=e("./lib/avltree")},{"./lib/avltree":18,"./lib/bst":19}],18:[function(e,t,n){var r=e("./bst"),i=e("./customUtils"),o=e("util");e("underscore");function a(e){this.tree=new u(e)}function u(e){e=e||{},this.left=null,this.right=null,this.parent=void 0!==e.parent?e.parent:null,e.hasOwnProperty("key")&&(this.key=e.key),this.data=e.hasOwnProperty("value")?[e.value]:[],this.unique=e.unique||!1,this.compareKeys=e.compareKeys||i.defaultCompareKeysFunction,this.checkValueEquality=e.checkValueEquality||i.defaultCheckValueEquality}o.inherits(u,r),(a._AVLTree=u).prototype.checkHeightCorrect=function(){var e,t;if(this.hasOwnProperty("key")){if(this.left&&void 0===this.left.height)throw new Error("Undefined height for node "+this.left.key);if(this.right&&void 0===this.right.height)throw new Error("Undefined height for node "+this.right.key);if(void 0===this.height)throw new Error("Undefined height for node "+this.key);if(e=this.left?this.left.height:0,t=this.right?this.right.height:0,this.height!==1+Math.max(e,t))throw new Error("Height constraint failed for node "+this.key);this.left&&this.left.checkHeightCorrect(),this.right&&this.right.checkHeightCorrect()}},u.prototype.balanceFactor=function(){return(this.left?this.left.height:0)-(this.right?this.right.height:0)},u.prototype.checkBalanceFactors=function(){if(1<Math.abs(this.balanceFactor()))throw new Error("Tree is unbalanced at node "+this.key);this.left&&this.left.checkBalanceFactors(),this.right&&this.right.checkBalanceFactors()},u.prototype.checkIsAVLT=function(){u.super_.prototype.checkIsBST.call(this),this.checkHeightCorrect(),this.checkBalanceFactors()},a.prototype.checkIsAVLT=function(){this.tree.checkIsAVLT()},u.prototype.rightRotation=function(){var e,t,n,r,i=this,o=this.left;return o?(e=o.right,i.parent?(o.parent=i.parent,i.parent.left===i?i.parent.left=o:i.parent.right=o):o.parent=null,(o.right=i).parent=o,(i.left=e)&&(e.parent=i),t=o.left?o.left.height:0,n=e?e.height:0,r=i.right?i.right.height:0,i.height=Math.max(n,r)+1,o.height=Math.max(t,i.height)+1,o):this},u.prototype.leftRotation=function(){var e,t,n,r,i=this,o=this.right;return o?(e=o.left,i.parent?(o.parent=i.parent,i.parent.left===i?i.parent.left=o:i.parent.right=o):o.parent=null,(o.left=i).parent=o,(i.right=e)&&(e.parent=i),t=i.left?i.left.height:0,n=e?e.height:0,r=o.right?o.right.height:0,i.height=Math.max(t,n)+1,o.height=Math.max(r,i.height)+1,o):this},u.prototype.rightTooSmall=function(){return this.balanceFactor()<=1?this:(this.left.balanceFactor()<0&&this.left.leftRotation(),this.rightRotation())},u.prototype.leftTooSmall=function(){return-1<=this.balanceFactor()?this:(0<this.right.balanceFactor()&&this.right.rightRotation(),this.leftRotation())},u.prototype.rebalanceAlongPath=function(e){var t,n,r=this;if(!this.hasOwnProperty("key"))return delete this.height,this;for(n=e.length-1;0<=n;n-=1)e[n].height=1+Math.max(e[n].left?e[n].left.height:0,e[n].right?e[n].right.height:0),1<e[n].balanceFactor()&&(t=e[n].rightTooSmall(),0===n&&(r=t)),e[n].balanceFactor()<-1&&(t=e[n].leftTooSmall(),0===n&&(r=t));return r},u.prototype.insert=function(e,t){var n=[],r=this;if(!this.hasOwnProperty("key"))return this.key=e,this.data.push(t),this.height=1,this;for(;;){if(0===r.compareKeys(r.key,e)){if(r.unique){var i=new Error("Can't insert key "+e+", it violates the unique constraint");throw i.key=e,i.errorType="uniqueViolated",i}return r.data.push(t),this}if(n.push(r),r.compareKeys(e,r.key)<0){if(!r.left){n.push(r.createLeftChild({key:e,value:t}));break}r=r.left}else{if(!r.right){n.push(r.createRightChild({key:e,value:t}));break}r=r.right}}return this.rebalanceAlongPath(n)},a.prototype.insert=function(e,t){var n=this.tree.insert(e,t);n&&(this.tree=n)},u.prototype.delete=function(e,t){var n,r=[],i=this,o=[];if(!this.hasOwnProperty("key"))return this;for(;0!==i.compareKeys(e,i.key);)if(o.push(i),i.compareKeys(e,i.key)<0){if(!i.left)return this;i=i.left}else{if(!i.right)return this;i=i.right}if(1<i.data.length&&t)return i.data.forEach(function(e){i.checkValueEquality(e,t)||r.push(e)}),i.data=r,this;if(!i.left&&!i.right)return i===this?(delete i.key,i.data=[],delete i.height,this):(i.parent.left===i?i.parent.left=null:i.parent.right=null,this.rebalanceAlongPath(o));if(!i.left||!i.right)return n=i.left?i.left:i.right,i===this?(n.parent=null,n):(i.parent.left===i?(i.parent.left=n).parent=i.parent:(i.parent.right=n).parent=i.parent,this.rebalanceAlongPath(o));if(o.push(i),!(n=i.left).right)return i.key=n.key,i.data=n.data,i.left=n.left,n.left&&(n.left.parent=i),this.rebalanceAlongPath(o);for(;n.right;)o.push(n),n=n.right;return i.key=n.key,i.data=n.data,n.parent.right=n.left,n.left&&(n.left.parent=n.parent),this.rebalanceAlongPath(o)},a.prototype.delete=function(e,t){var n=this.tree.delete(e,t);n&&(this.tree=n)},["getNumberOfKeys","search","betweenBounds","prettyPrint","executeOnEveryNode"].forEach(function(e){a.prototype[e]=function(){return this.tree[e].apply(this.tree,arguments)}}),t.exports=a},{"./bst":19,"./customUtils":20,underscore:22,util:7}],19:[function(e,t,n){var r=e("./customUtils");function i(e){e=e||{},this.left=null,this.right=null,this.parent=void 0!==e.parent?e.parent:null,e.hasOwnProperty("key")&&(this.key=e.key),this.data=e.hasOwnProperty("value")?[e.value]:[],this.unique=e.unique||!1,this.compareKeys=e.compareKeys||r.defaultCompareKeysFunction,this.checkValueEquality=e.checkValueEquality||r.defaultCheckValueEquality}function o(e,t){var n;for(n=0;n<t.length;n+=1)e.push(t[n])}i.prototype.getMaxKeyDescendant=function(){return this.right?this.right.getMaxKeyDescendant():this},i.prototype.getMaxKey=function(){return this.getMaxKeyDescendant().key},i.prototype.getMinKeyDescendant=function(){return this.left?this.left.getMinKeyDescendant():this},i.prototype.getMinKey=function(){return this.getMinKeyDescendant().key},i.prototype.checkAllNodesFullfillCondition=function(e){this.hasOwnProperty("key")&&(e(this.key,this.data),this.left&&this.left.checkAllNodesFullfillCondition(e),this.right&&this.right.checkAllNodesFullfillCondition(e))},i.prototype.checkNodeOrdering=function(){var t=this;this.hasOwnProperty("key")&&(this.left&&(this.left.checkAllNodesFullfillCondition(function(e){if(0<=t.compareKeys(e,t.key))throw new Error("Tree with root "+t.key+" is not a binary search tree")}),this.left.checkNodeOrdering()),this.right&&(this.right.checkAllNodesFullfillCondition(function(e){if(t.compareKeys(e,t.key)<=0)throw new Error("Tree with root "+t.key+" is not a binary search tree")}),this.right.checkNodeOrdering()))},i.prototype.checkInternalPointers=function(){if(this.left){if(this.left.parent!==this)throw new Error("Parent pointer broken for key "+this.key);this.left.checkInternalPointers()}if(this.right){if(this.right.parent!==this)throw new Error("Parent pointer broken for key "+this.key);this.right.checkInternalPointers()}},i.prototype.checkIsBST=function(){if(this.checkNodeOrdering(),this.checkInternalPointers(),this.parent)throw new Error("The root shouldn't have a parent")},i.prototype.getNumberOfKeys=function(){var e;return this.hasOwnProperty("key")?(e=1,this.left&&(e+=this.left.getNumberOfKeys()),this.right&&(e+=this.right.getNumberOfKeys()),e):0},i.prototype.createSimilar=function(e){return(e=e||{}).unique=this.unique,e.compareKeys=this.compareKeys,e.checkValueEquality=this.checkValueEquality,new this.constructor(e)},i.prototype.createLeftChild=function(e){var t=this.createSimilar(e);return(t.parent=this).left=t},i.prototype.createRightChild=function(e){var t=this.createSimilar(e);return(t.parent=this).right=t},i.prototype.insert=function(e,t){if(!this.hasOwnProperty("key"))return this.key=e,void this.data.push(t);if(0!==this.compareKeys(this.key,e))this.compareKeys(e,this.key)<0?this.left?this.left.insert(e,t):this.createLeftChild({key:e,value:t}):this.right?this.right.insert(e,t):this.createRightChild({key:e,value:t});else{if(this.unique){var n=new Error("Can't insert key "+e+", it violates the unique constraint");throw n.key=e,n.errorType="uniqueViolated",n}this.data.push(t)}},i.prototype.search=function(e){return this.hasOwnProperty("key")?0===this.compareKeys(this.key,e)?this.data:this.compareKeys(e,this.key)<0?this.left?this.left.search(e):[]:this.right?this.right.search(e):[]:[]},i.prototype.getLowerBoundMatcher=function(t){var n=this;return t.hasOwnProperty("$gt")||t.hasOwnProperty("$gte")?t.hasOwnProperty("$gt")&&t.hasOwnProperty("$gte")?0===n.compareKeys(t.$gte,t.$gt)?function(e){return 0<n.compareKeys(e,t.$gt)}:0<n.compareKeys(t.$gte,t.$gt)?function(e){return 0<=n.compareKeys(e,t.$gte)}:function(e){return 0<n.compareKeys(e,t.$gt)}:t.hasOwnProperty("$gt")?function(e){return 0<n.compareKeys(e,t.$gt)}:function(e){return 0<=n.compareKeys(e,t.$gte)}:function(){return!0}},i.prototype.getUpperBoundMatcher=function(t){var n=this;return t.hasOwnProperty("$lt")||t.hasOwnProperty("$lte")?t.hasOwnProperty("$lt")&&t.hasOwnProperty("$lte")?0===n.compareKeys(t.$lte,t.$lt)?function(e){return n.compareKeys(e,t.$lt)<0}:n.compareKeys(t.$lte,t.$lt)<0?function(e){return n.compareKeys(e,t.$lte)<=0}:function(e){return n.compareKeys(e,t.$lt)<0}:t.hasOwnProperty("$lt")?function(e){return n.compareKeys(e,t.$lt)<0}:function(e){return n.compareKeys(e,t.$lte)<=0}:function(){return!0}},i.prototype.betweenBounds=function(e,t,n){var r=[];return this.hasOwnProperty("key")?(t=t||this.getLowerBoundMatcher(e),n=n||this.getUpperBoundMatcher(e),t(this.key)&&this.left&&o(r,this.left.betweenBounds(e,t,n)),t(this.key)&&n(this.key)&&o(r,this.data),n(this.key)&&this.right&&o(r,this.right.betweenBounds(e,t,n)),r):[]},i.prototype.deleteIfLeaf=function(){return!this.left&&!this.right&&(this.parent?this.parent.left===this?this.parent.left=null:this.parent.right=null:(delete this.key,this.data=[]),!0)},i.prototype.deleteIfOnlyOneChild=function(){var e;return this.left&&!this.right&&(e=this.left),!this.left&&this.right&&(e=this.right),!!e&&(this.parent?this.parent.left===this?(this.parent.left=e).parent=this.parent:(this.parent.right=e).parent=this.parent:(this.key=e.key,this.data=e.data,this.left=null,e.left&&(this.left=e.left,e.left.parent=this),this.right=null,e.right&&(this.right=e.right,e.right.parent=this)),!0)},i.prototype.delete=function(e,t){var n,r=[],i=this;if(this.hasOwnProperty("key"))if(this.compareKeys(e,this.key)<0)this.left&&this.left.delete(e,t);else if(0<this.compareKeys(e,this.key))this.right&&this.right.delete(e,t);else if(0!==!this.compareKeys(e,this.key))return 1<this.data.length&&void 0!==t?(this.data.forEach(function(e){i.checkValueEquality(e,t)||r.push(e)}),void(i.data=r)):void(this.deleteIfLeaf()||this.deleteIfOnlyOneChild()||(.5<=Math.random()?(n=this.left.getMaxKeyDescendant(),this.key=n.key,this.data=n.data,this===n.parent?this.left=n.left:n.parent.right=n.left,n.left&&(n.left.parent=n.parent)):(n=this.right.getMinKeyDescendant(),this.key=n.key,this.data=n.data,this===n.parent?this.right=n.right:n.parent.left=n.right,n.right&&(n.right.parent=n.parent))))},i.prototype.executeOnEveryNode=function(e){this.left&&this.left.executeOnEveryNode(e),e(this),this.right&&this.right.executeOnEveryNode(e)},i.prototype.prettyPrint=function(e,t){t=t||"",console.log(t+"* "+this.key),e&&console.log(t+"* "+this.data),(this.left||this.right)&&(this.left?this.left.prettyPrint(e,t+"  "):console.log(t+"  *"),this.right?this.right.prettyPrint(e,t+"  "):console.log(t+"  *"))},t.exports=i},{"./customUtils":20}],20:[function(e,t,n){t.exports.getRandomArray=function e(t){var n,r;return 0===t?[]:1===t?[0]:(n=e(t-1),r=Math.floor(Math.random()*t),n.splice(r,0,t-1),n)},t.exports.defaultCompareKeysFunction=function(e,t){if(e<t)return-1;if(t<e)return 1;if(e===t)return 0;var n=new Error("Couldn't compare elements");throw n.a=e,n.b=t,n},t.exports.defaultCheckValueEquality=function(e,t){return e===t}},{}],21:[function(l,t,n){(function(r){!function(e){if("object"==typeof n&&void 0!==t)t.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:this).localforage=e()}}(function(){return function o(a,u,c){function s(n,e){if(!u[n]){if(!a[n]){var t="function"==typeof l&&l;if(!e&&t)return t(n,!0);if(f)return f(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var i=u[n]={exports:{}};a[n][0].call(i.exports,function(e){var t=a[n][1][e];return s(t||e)},i,i.exports,o,a,u,c)}return u[n].exports}for(var f="function"==typeof l&&l,e=0;e<c.length;e++)s(c[e]);return s}({1:[function(e,f,t){(function(t){"use strict";var n,r,e=t.MutationObserver||t.WebKitMutationObserver;if(e){var i=0,o=new e(s),a=t.document.createTextNode("");o.observe(a,{characterData:!0}),n=function(){a.data=i=++i%2}}else if(t.setImmediate||void 0===t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){s(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(s,0)};else{var u=new t.MessageChannel;u.port1.onmessage=s,n=function(){u.port2.postMessage(0)}}var c=[];function s(){var e,t;r=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}r=!1}f.exports=function(e){1!==c.push(e)||r||n()}}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";var i=e(1);function s(){}var f={},o=["REJECTED"],a=["FULFILLED"],r=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=r,this.queue=[],this.outcome=void 0,e!==s&&p(this,e)}function c(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function l(t,n,r){i(function(){var e;try{e=n(r)}catch(e){return f.reject(t,e)}e===t?f.reject(t,new TypeError("Cannot resolve promise with itself")):f.resolve(t,e)})}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(t,e){var n=!1;function r(e){n||(n=!0,f.reject(t,e))}function i(e){n||(n=!0,f.resolve(t,e))}var o=d(function(){e(i,r)});"error"===o.status&&r(o.value)}function d(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=u).prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===o)return this;var n=new this.constructor(s);this.state!==r?l(n,this.state===a?e:t,this.outcome):this.queue.push(new c(n,e,t));return n},c.prototype.callFulfilled=function(e){f.resolve(this.promise,e)},c.prototype.otherCallFulfilled=function(e){l(this.promise,this.onFulfilled,e)},c.prototype.callRejected=function(e){f.reject(this.promise,e)},c.prototype.otherCallRejected=function(e){l(this.promise,this.onRejected,e)},f.resolve=function(e,t){var n=d(h,t);if("error"===n.status)return f.reject(e,n.value);var r=n.value;if(r)p(e,r);else{e.state=a,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},f.reject=function(e,t){e.state=o,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},u.resolve=function(e){if(e instanceof this)return e;return f.resolve(new this(s),e)},u.reject=function(e){var t=new this(s);return f.reject(t,e)},u.all=function(e){var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,i=!1;if(!r)return this.resolve([]);var o=new Array(r),a=0,t=-1,u=new this(s);for(;++t<r;)c(e[t],t);return u;function c(e,t){n.resolve(e).then(function(e){o[t]=e,++a!==r||i||(i=!0,f.resolve(u,o))},function(e){i||(i=!0,f.reject(u,e))})}},u.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);var i=-1,o=new this(s);for(;++i<n;)a=e[i],t.resolve(a).then(function(e){r||(r=!0,f.resolve(o,e))},function(e){r||(r=!0,f.reject(o,e))});var a;return o}},{1:1}],3:[function(t,e,n){(function(e){"use strict";"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var u=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function a(t,n){t=t||[],n=n||{};try{return new Blob(t,n)}catch(e){if("TypeError"!==e.name)throw e;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),i=0;i<t.length;i+=1)r.append(t[i]);return r.getBlob(n.type)}}"undefined"==typeof Promise&&e(3);var l=Promise;function h(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function c(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function p(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function o(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var s="local-forage-detect-blob-support",i=void 0,f={},d=Object.prototype.toString,y="readonly",v="readwrite";function g(e){return"boolean"==typeof i?l.resolve(i):(r=e,new l(function(n){var e=r.transaction(s,v),t=a([""]);e.objectStore(s).put(t,"key"),e.onabort=function(e){e.preventDefault(),e.stopPropagation(),n(!1)},e.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),t=navigator.userAgent.match(/Edge\//);n(t||!e||43<=parseInt(e[1],10))}}).catch(function(){return!1})).then(function(e){return i=e});var r}function m(e){var t=f[e.name],n={};n.promise=new l(function(e,t){n.resolve=e,n.reject=t}),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then(function(){return n.promise}):t.dbReady=n.promise}function b(e){var t=f[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function w(e,t){var n=f[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function _(i,o){return new l(function(e,t){if(f[i.name]=f[i.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},i.db){if(!o)return e(i.db);m(i),i.db.close()}var n=[i.name];o&&n.push(i.version);var r=u.open.apply(u,n);o&&(r.onupgradeneeded=function(t){var e=r.result;try{e.createObjectStore(i.storeName),t.oldVersion<=1&&e.createObjectStore(s)}catch(e){if("ConstraintError"!==e.name)throw e;console.warn('The database "'+i.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+i.storeName+'" already exists.')}}),r.onerror=function(e){e.preventDefault(),t(r.error)},r.onsuccess=function(){e(r.result),b(i)}})}function x(e){return _(e,!1)}function k(e){return _(e,!0)}function E(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,i=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||n){if(n){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function A(e){return a([function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}(atob(e.data))],{type:e.type})}function O(e){return e&&e.__local_forage_encoded_blob}function I(e){var t=this,n=t._initReady().then(function(){var e=f[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return c(n,e,e),n}function j(t,n,r,i){void 0===i&&(i=1);try{var e=t.db.transaction(t.storeName,n);r(null,e)}catch(e){if(0<i&&(!t.db||"InvalidStateError"===e.name||"NotFoundError"===e.name))return l.resolve().then(function(){if(!t.db||"NotFoundError"===e.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),k(t)}).then(function(){return function(n){m(n);for(var r=f[n.name],i=r.forages,e=0;e<i.length;e++){var t=i[e];t._dbInfo.db&&(t._dbInfo.db.close(),t._dbInfo.db=null)}return n.db=null,x(n).then(function(e){return n.db=e,E(n)?k(n):e}).then(function(e){n.db=r.db=e;for(var t=0;t<i.length;t++)i[t]._dbInfo.db=e}).catch(function(e){throw w(n,e),e})}(t).then(function(){j(t,n,r,i-1)})}).catch(r);r(e)}}var S={_driver:"asyncStorage",_initStorage:function(e){var r=this,i={db:null};if(e)for(var t in e)i[t]=e[t];var o=f[i.name];o||(o={forages:[],db:null,dbReady:null,deferredOperations:[]},f[i.name]=o),o.forages.push(r),r._initReady||(r._initReady=r.ready,r.ready=I);var n=[];function a(){return l.resolve()}for(var u=0;u<o.forages.length;u++){var c=o.forages[u];c!==r&&n.push(c._initReady().catch(a))}var s=o.forages.slice(0);return l.all(n).then(function(){return i.db=o.db,x(i)}).then(function(e){return i.db=e,E(i,r._defaultConfig.version)?k(i):e}).then(function(e){i.db=o.db=e,r._dbInfo=i;for(var t=0;t<s.length;t++){var n=s[t];n!==r&&(n._dbInfo.db=i.db,n._dbInfo.version=i.version)}})},_support:function(){try{if(!u)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(a,e){var u=this,t=new l(function(o,n){u.ready().then(function(){j(u._dbInfo,y,function(e,t){if(e)return n(e);try{var r=t.objectStore(u._dbInfo.storeName).openCursor(),i=1;r.onsuccess=function(){var e=r.result;if(e){var t=e.value;O(t)&&(t=A(t));var n=a(t,e.key,i++);void 0!==n?o(n):e.continue()}else o()},r.onerror=function(){n(r.error)}}catch(e){n(e)}})}).catch(n)});return h(t,e),t},getItem:function(o,e){var a=this;o=p(o);var t=new l(function(r,i){a.ready().then(function(){j(a._dbInfo,y,function(e,t){if(e)return i(e);try{var n=t.objectStore(a._dbInfo.storeName).get(o);n.onsuccess=function(){var e=n.result;void 0===e&&(e=null),O(e)&&(e=A(e)),r(e)},n.onerror=function(){i(n.error)}}catch(e){i(e)}})}).catch(i)});return h(t,e),t},setItem:function(u,t,e){var c=this;u=p(u);var n=new l(function(o,a){var e;c.ready().then(function(){return e=c._dbInfo,"[object Blob]"===d.call(t)?g(e.db).then(function(e){return e?t:(r=t,new l(function(n,e){var t=new FileReader;t.onerror=e,t.onloadend=function(e){var t=btoa(e.target.result||"");n({__local_forage_encoded_blob:!0,data:t,type:r.type})},t.readAsBinaryString(r)}));var r}):t}).then(function(i){j(c._dbInfo,v,function(e,t){if(e)return a(e);try{var n=t.objectStore(c._dbInfo.storeName);null===i&&(i=void 0);var r=n.put(i,u);t.oncomplete=function(){void 0===i&&(i=null),o(i)},t.onabort=t.onerror=function(){var e=r.error?r.error:r.transaction.error;a(e)}}catch(e){a(e)}})}).catch(a)});return h(n,e),n},removeItem:function(o,e){var a=this;o=p(o);var t=new l(function(r,i){a.ready().then(function(){j(a._dbInfo,v,function(e,t){if(e)return i(e);try{var n=t.objectStore(a._dbInfo.storeName).delete(o);t.oncomplete=function(){r()},t.onerror=function(){i(n.error)},t.onabort=function(){var e=n.error?n.error:n.transaction.error;i(e)}}catch(e){i(e)}})}).catch(i)});return h(t,e),t},clear:function(e){var o=this,t=new l(function(r,i){o.ready().then(function(){j(o._dbInfo,v,function(e,t){if(e)return i(e);try{var n=t.objectStore(o._dbInfo.storeName).clear();t.oncomplete=function(){r()},t.onabort=t.onerror=function(){var e=n.error?n.error:n.transaction.error;i(e)}}catch(e){i(e)}})}).catch(i)});return h(t,e),t},length:function(e){var o=this,t=new l(function(r,i){o.ready().then(function(){j(o._dbInfo,y,function(e,t){if(e)return i(e);try{var n=t.objectStore(o._dbInfo.storeName).count();n.onsuccess=function(){r(n.result)},n.onerror=function(){i(n.error)}}catch(e){i(e)}})}).catch(i)});return h(t,e),t},key:function(u,e){var c=this,t=new l(function(o,a){u<0?o(null):c.ready().then(function(){j(c._dbInfo,y,function(e,t){if(e)return a(e);try{var n=t.objectStore(c._dbInfo.storeName),r=!1,i=n.openCursor();i.onsuccess=function(){var e=i.result;e?0===u?o(e.key):r?o(e.key):(r=!0,e.advance(u)):o(null)},i.onerror=function(){a(i.error)}}catch(e){a(e)}})}).catch(a)});return h(t,e),t},keys:function(e){var a=this,t=new l(function(i,o){a.ready().then(function(){j(a._dbInfo,y,function(e,t){if(e)return o(e);try{var n=t.objectStore(a._dbInfo.storeName).openCursor(),r=[];n.onsuccess=function(){var e=n.result;e?(r.push(e.key),e.continue()):i(r)},n.onerror=function(){o(n.error)}}catch(e){o(e)}})}).catch(o)});return h(t,e),t},dropInstance:function(a,e){e=o.apply(this,arguments);var t,n=this.config();if((a="function"!=typeof a&&a||{}).name||(a.name=a.name||n.name,a.storeName=a.storeName||n.storeName),a.name){var r=a.name===n.name&&this._dbInfo.db?l.resolve(this._dbInfo.db):x(a).then(function(e){var t=f[a.name],n=t.forages;t.db=e;for(var r=0;r<n.length;r++)n[r]._dbInfo.db=e;return e});t=a.storeName?r.then(function(e){if(e.objectStoreNames.contains(a.storeName)){var i=e.version+1;m(a);var r=f[a.name],o=r.forages;e.close();for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=null,n._dbInfo.version=i}return new l(function(t,n){var r=u.open(a.name,i);r.onerror=function(e){r.result.close(),n(e)},r.onupgradeneeded=function(){r.result.deleteObjectStore(a.storeName)},r.onsuccess=function(){var e=r.result;e.close(),t(e)}}).then(function(e){r.db=e;for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=e,b(n._dbInfo)}}).catch(function(e){throw(w(a,e)||l.resolve()).catch(function(){}),e})}}):r.then(function(e){m(a);var n=f[a.name],r=n.forages;e.close();for(var t=0;t<r.length;t++)r[t]._dbInfo.db=null;return new l(function(t,n){var r=u.deleteDatabase(a.name);r.onerror=r.onblocked=function(e){var t=r.result;t&&t.close(),n(e)},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}}).then(function(e){n.db=e;for(var t=0;t<r.length;t++)b(r[t]._dbInfo)}).catch(function(e){throw(w(a,e)||l.resolve()).catch(function(){}),e})})}else t=l.reject("Invalid arguments");return h(t,e),t}};var D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N=/^~~local_forage_type~([^~]+)~/,$="__lfsc__:",T=$.length,C="arbf",M="blob",F=T+C.length,R=Object.prototype.toString;function P(e){var t,n,r,i,o,a=.75*e.length,u=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var s=new ArrayBuffer(a),f=new Uint8Array(s);for(t=0;t<u;t+=4)n=D.indexOf(e[t]),r=D.indexOf(e[t+1]),i=D.indexOf(e[t+2]),o=D.indexOf(e[t+3]),f[c++]=n<<2|r>>4,f[c++]=(15&r)<<4|i>>2,f[c++]=(3&i)<<6|63&o;return s}function L(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=D[n[t]>>2],r+=D[(3&n[t])<<4|n[t+1]>>4],r+=D[(15&n[t+1])<<2|n[t+2]>>6],r+=D[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var z={serialize:function(t,n){var e="";if(t&&(e=R.call(t)),t&&("[object ArrayBuffer]"===e||t.buffer&&"[object ArrayBuffer]"===R.call(t.buffer))){var r,i=$;t instanceof ArrayBuffer?(r=t,i+=C):(r=t.buffer,"[object Int8Array]"===e?i+="si08":"[object Uint8Array]"===e?i+="ui08":"[object Uint8ClampedArray]"===e?i+="uic8":"[object Int16Array]"===e?i+="si16":"[object Uint16Array]"===e?i+="ur16":"[object Int32Array]"===e?i+="si32":"[object Uint32Array]"===e?i+="ui32":"[object Float32Array]"===e?i+="fl32":"[object Float64Array]"===e?i+="fl64":n(new Error("Failed to get type for BinaryArray"))),n(i+L(r))}else if("[object Blob]"===e){var o=new FileReader;o.onload=function(){var e="~~local_forage_type~"+t.type+"~"+L(this.result);n($+M+e)},o.readAsArrayBuffer(t)}else try{n(JSON.stringify(t))}catch(e){console.error("Couldn't convert value into a JSON string: ",t),n(null,e)}},deserialize:function(e){if(e.substring(0,T)!==$)return JSON.parse(e);var t,n=e.substring(F),r=e.substring(T,F);if(r===M&&N.test(n)){var i=n.match(N);t=i[1],n=n.substring(i[0].length)}var o=P(n);switch(r){case C:return o;case M:return a([o],{type:t});case"si08":return new Int8Array(o);case"ui08":return new Uint8Array(o);case"uic8":return new Uint8ClampedArray(o);case"si16":return new Int16Array(o);case"ur16":return new Uint16Array(o);case"si32":return new Int32Array(o);case"ui32":return new Uint32Array(o);case"fl32":return new Float32Array(o);case"fl64":return new Float64Array(o);default:throw new Error("Unkown type: "+r)}},stringToBuffer:P,bufferToString:L};function B(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function q(e,r,i,o,a,u){e.executeSql(i,o,a,function(e,n){n.code===n.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[r.storeName],function(e,t){t.rows.length?u(e,n):B(e,r,function(){e.executeSql(i,o,a,u)},u)},u):u(e,n)},u)}var K={_driver:"webSQLStorage",_initStorage:function(e){var r=this,i={db:null};if(e)for(var t in e)i[t]="string"!=typeof e[t]?e[t].toString():e[t];var n=new l(function(t,n){try{i.db=openDatabase(i.name,String(i.version),i.description,i.size)}catch(e){return n(e)}i.db.transaction(function(e){B(e,i,function(){r._dbInfo=i,t()},function(e,t){n(t)})},n)});return i.serializer=z,n},_support:"function"==typeof openDatabase,iterate:function(s,e){var t=this,n=new l(function(c,n){t.ready().then(function(){var u=t._dbInfo;u.db.transaction(function(e){q(e,u,"SELECT * FROM "+u.storeName,[],function(e,t){for(var n=t.rows,r=n.length,i=0;i<r;i++){var o=n.item(i),a=o.value;if(a&&(a=u.serializer.deserialize(a)),void 0!==(a=s(a,o.key,i+1)))return void c(a)}c()},function(e,t){n(t)})})}).catch(n)});return h(n,e),n},getItem:function(t,e){var o=this;t=p(t);var n=new l(function(i,n){o.ready().then(function(){var r=o._dbInfo;r.db.transaction(function(e){q(e,r,"SELECT * FROM "+r.storeName+" WHERE key = ? LIMIT 1",[t],function(e,t){var n=t.rows.length?t.rows.item(0).value:null;n&&(n=r.serializer.deserialize(n)),i(n)},function(e,t){n(t)})})}).catch(n)});return h(n,e),n},setItem:function(e,t,n){return function a(u,e,c,s){var f=this;u=p(u);var t=new l(function(i,o){f.ready().then(function(){void 0===e&&(e=null);var n=e,r=f._dbInfo;r.serializer.serialize(e,function(t,e){e?o(e):r.db.transaction(function(e){q(e,r,"INSERT OR REPLACE INTO "+r.storeName+" (key, value) VALUES (?, ?)",[u,t],function(){i(n)},function(e,t){o(t)})},function(e){if(e.code===e.QUOTA_ERR){if(0<s)return void i(a.apply(f,[u,n,c,s-1]));o(e)}})})}).catch(o)});return h(t,c),t}.apply(this,[e,t,n,1])},removeItem:function(i,e){var o=this;i=p(i);var t=new l(function(n,r){o.ready().then(function(){var t=o._dbInfo;t.db.transaction(function(e){q(e,t,"DELETE FROM "+t.storeName+" WHERE key = ?",[i],function(){n()},function(e,t){r(t)})})}).catch(r)});return h(t,e),t},clear:function(e){var i=this,t=new l(function(n,r){i.ready().then(function(){var t=i._dbInfo;t.db.transaction(function(e){q(e,t,"DELETE FROM "+t.storeName,[],function(){n()},function(e,t){r(t)})})}).catch(r)});return h(t,e),t},length:function(e){var i=this,t=new l(function(r,n){i.ready().then(function(){var t=i._dbInfo;t.db.transaction(function(e){q(e,t,"SELECT COUNT(key) as c FROM "+t.storeName,[],function(e,t){var n=t.rows.item(0).c;r(n)},function(e,t){n(t)})})}).catch(n)});return h(t,e),t},key:function(i,e){var o=this,t=new l(function(r,n){o.ready().then(function(){var t=o._dbInfo;t.db.transaction(function(e){q(e,t,"SELECT key FROM "+t.storeName+" WHERE id = ? LIMIT 1",[i+1],function(e,t){var n=t.rows.length?t.rows.item(0).key:null;r(n)},function(e,t){n(t)})})}).catch(n)});return h(t,e),t},keys:function(e){var r=this,t=new l(function(i,n){r.ready().then(function(){var t=r._dbInfo;t.db.transaction(function(e){q(e,t,"SELECT key FROM "+t.storeName,[],function(e,t){for(var n=[],r=0;r<t.rows.length;r++)n.push(t.rows.item(r).key);i(n)},function(e,t){n(t)})})}).catch(n)});return h(t,e),t},dropInstance:function(n,e){e=o.apply(this,arguments);var r=this.config();(n="function"!=typeof n&&n||{}).name||(n.name=n.name||r.name,n.storeName=n.storeName||r.storeName);var t,i=this;return h(t=n.name?new l(function(e){var t,o;t=n.name===r.name?i._dbInfo.db:openDatabase(n.name,"","",0),n.storeName?e({db:t,storeNames:[n.storeName]}):e((o=t,new l(function(i,n){o.transaction(function(e){e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(e,t){for(var n=[],r=0;r<t.rows.length;r++)n.push(t.rows.item(r).name);i({db:o,storeNames:n})},function(e,t){n(t)})},function(e){n(e)})})))}).then(function(u){return new l(function(o,a){u.db.transaction(function(r){function e(t){return new l(function(e,n){r.executeSql("DROP TABLE IF EXISTS "+t,[],function(){e()},function(e,t){n(t)})})}for(var t=[],n=0,i=u.storeNames.length;n<i;n++)t.push(e(u.storeNames[n]));l.all(t).then(function(){o()}).catch(function(e){a(e)})},function(e){a(e)})})}):l.reject("Invalid arguments"),e),t}};function U(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function V(){return!function(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}()||0<localStorage.length}var W={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var n in e)t[n]=e[n];return t.keyPrefix=U(e,this._defaultConfig),V()?((this._dbInfo=t).serializer=z,l.resolve()):l.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(c,e){var s=this,t=s.ready().then(function(){for(var e=s._dbInfo,t=e.keyPrefix,n=t.length,r=localStorage.length,i=1,o=0;o<r;o++){var a=localStorage.key(o);if(0===a.indexOf(t)){var u=localStorage.getItem(a);if(u&&(u=e.serializer.deserialize(u)),void 0!==(u=c(u,a.substring(n),i++)))return u}}});return h(t,e),t},getItem:function(n,e){var r=this;n=p(n);var t=r.ready().then(function(){var e=r._dbInfo,t=localStorage.getItem(e.keyPrefix+n);return t&&(t=e.serializer.deserialize(t)),t});return h(t,e),t},setItem:function(a,e,t){var u=this;a=p(a);var n=u.ready().then(function(){void 0===e&&(e=null);var o=e;return new l(function(n,r){var i=u._dbInfo;i.serializer.serialize(e,function(e,t){if(t)r(t);else try{localStorage.setItem(i.keyPrefix+a,e),n(o)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||r(e),r(e)}})})});return h(n,t),n},removeItem:function(t,e){var n=this;t=p(t);var r=n.ready().then(function(){var e=n._dbInfo;localStorage.removeItem(e.keyPrefix+t)});return h(r,e),r},clear:function(e){var r=this,t=r.ready().then(function(){for(var e=r._dbInfo.keyPrefix,t=localStorage.length-1;0<=t;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}});return h(t,e),t},length:function(e){var t=this.keys().then(function(e){return e.length});return h(t,e),t},key:function(n,e){var r=this,t=r.ready().then(function(){var t,e=r._dbInfo;try{t=localStorage.key(n)}catch(e){t=null}return t&&(t=t.substring(e.keyPrefix.length)),t});return h(t,e),t},keys:function(e){var o=this,t=o.ready().then(function(){for(var e=o._dbInfo,t=localStorage.length,n=[],r=0;r<t;r++){var i=localStorage.key(r);0===i.indexOf(e.keyPrefix)&&n.push(i.substring(e.keyPrefix.length))}return n});return h(t,e),t},dropInstance:function(t,e){if(e=o.apply(this,arguments),!(t="function"!=typeof t&&t||{}).name){var n=this.config();t.name=t.name||n.name,t.storeName=t.storeName||n.storeName}var r,i=this;return h(r=t.name?new l(function(e){t.storeName?e(U(t,i._defaultConfig)):e(t.name+"/")}).then(function(e){for(var t=localStorage.length-1;0<=t;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}}):l.reject("Invalid arguments"),e),r}},H=function(e,t){for(var n,r,i=e.length,o=0;o<i;){if((n=e[o])===(r=t)||"number"==typeof n&&"number"==typeof r&&isNaN(n)&&isNaN(r))return!0;o++}return!1},J=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},G={},Y={},Q={INDEXEDDB:S,WEBSQL:K,LOCALSTORAGE:W},X=[Q.INDEXEDDB._driver,Q.WEBSQL._driver,Q.LOCALSTORAGE._driver],Z=["dropInstance"],ee=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Z),te={description:"",driver:X.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ne(t,n){t[n]=function(){var e=arguments;return t.ready().then(function(){return t[n].apply(t,e)})}}function re(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(J(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var ie=new(function(){function i(e){for(var t in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Q)if(Q.hasOwnProperty(t)){var n=Q[t],r=n._driver;this[t]=r,G[r]||this.defineDriver(n)}this._defaultConfig=re({},te),this._config=re({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return i.prototype.config=function(e){if("object"!==(void 0===e?"undefined":r(e)))return"string"==typeof e?this._config[e]:this._config;if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e&&e.driver)||this.setDriver(this._config.driver)},i.prototype.defineDriver=function(s,e,t){var n=new l(function(t,n){try{var r=s._driver,e=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!s._driver)return void n(e);for(var i=ee.concat("_initStorage"),o=0,a=i.length;o<a;o++){var u=i[o];if((!H(Z,u)||s[u])&&"function"!=typeof s[u])return void n(e)}!function(){for(var e=function(n){return function(){var e=new Error("Method "+n+" is not implemented by the current driver"),t=l.reject(e);return h(t,arguments[arguments.length-1]),t}},t=0,n=Z.length;t<n;t++){var r=Z[t];s[r]||(s[r]=e(r))}}();var c=function(e){G[r]&&console.info("Redefining LocalForage driver: "+r),G[r]=s,Y[r]=e,t()};"_support"in s?s._support&&"function"==typeof s._support?s._support().then(c,n):c(!!s._support):c(!0)}catch(e){n(e)}});return c(n,e,t),n},i.prototype.driver=function(){return this._driver||null},i.prototype.getDriver=function(e,t,n){var r=G[e]?l.resolve(G[e]):l.reject(new Error("Driver not found."));return c(r,t,n),r},i.prototype.getSerializer=function(e){var t=l.resolve(z);return c(t,e),t},i.prototype.ready=function(e){var t=this,n=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return c(n,e,e),n},i.prototype.setDriver=function(e,t,n){var o=this;J(e)||(e=[e]);var r=this._getSupportedDrivers(e);function a(){o._config.driver=o.driver()}function u(e){return o._extend(e),a(),o._ready=o._initStorage(o._config),o._ready}var i=null!==this._driverSet?this._driverSet.catch(function(){return l.resolve()}):l.resolve();return this._driverSet=i.then(function(){var e=r[0];return o._dbInfo=null,o._ready=null,o.getDriver(e).then(function(e){var i;o._driver=e._driver,a(),o._wrapLibraryMethodsWithReady(),o._initDriver=(i=r,function(){var r=0;return function e(){for(;r<i.length;){var t=i[r];return r++,o._dbInfo=null,o._ready=null,o.getDriver(t).then(u).catch(e)}a();var n=new Error("No available storage method found.");return o._driverSet=l.reject(n),o._driverSet}()})})}).catch(function(){a();var e=new Error("No available storage method found.");return o._driverSet=l.reject(e),o._driverSet}),c(this._driverSet,t,n),this._driverSet},i.prototype.supports=function(e){return!!Y[e]},i.prototype._extend=function(e){re(this,e)},i.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];this.supports(i)&&t.push(i)}return t},i.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=ee.length;e<t;e++)ne(this,ee[e])},i.prototype.createInstance=function(e){return new i(e)},i}());t.exports=ie},{3:3}]},{},[4])(4)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],22:[function(e,P,L){(function(){var e=this,t=e._,a={},i=Array.prototype,n=Object.prototype,r=Function.prototype,o=i.push,u=i.slice,c=i.concat,l=n.toString,s=n.hasOwnProperty,f=i.forEach,h=i.map,p=i.reduce,d=i.reduceRight,y=i.filter,v=i.every,g=i.some,m=i.indexOf,b=i.lastIndexOf,w=Array.isArray,_=Object.keys,x=r.bind,k=function(e){return e instanceof k?e:this instanceof k?void(this._wrapped=e):new k(e)};void 0!==L?(void 0!==P&&P.exports&&(L=P.exports=k),L._=k):e._=k,k.VERSION="1.4.4";var E=k.each=k.forEach=function(e,t,n){if(null!=e)if(f&&e.forEach===f)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,i=e.length;r<i;r++)if(t.call(n,e[r],r,e)===a)return}else for(var o in e)if(k.has(e,o)&&t.call(n,e[o],o,e)===a)return};k.map=k.collect=function(e,r,i){var o=[];return null==e?o:h&&e.map===h?e.map(r,i):(E(e,function(e,t,n){o[o.length]=r.call(i,e,t,n)}),o)};var A="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(e,r,i,o){var a=2<arguments.length;if(null==e&&(e=[]),p&&e.reduce===p)return o&&(r=k.bind(r,o)),a?e.reduce(r,i):e.reduce(r);if(E(e,function(e,t,n){a?i=r.call(o,i,e,t,n):(i=e,a=!0)}),!a)throw new TypeError(A);return i},k.reduceRight=k.foldr=function(r,i,o,a){var u=2<arguments.length;if(null==r&&(r=[]),d&&r.reduceRight===d)return a&&(i=k.bind(i,a)),u?r.reduceRight(i,o):r.reduceRight(i);var c=r.length;if(c!==+c){var s=k.keys(r);c=s.length}if(E(r,function(e,t,n){t=s?s[--c]:--c,u?o=i.call(a,o,r[t],t,n):(o=r[t],u=!0)}),!u)throw new TypeError(A);return o},k.find=k.detect=function(e,r,i){var o;return O(e,function(e,t,n){if(r.call(i,e,t,n))return o=e,!0}),o},k.filter=k.select=function(e,r,i){var o=[];return null==e?o:y&&e.filter===y?e.filter(r,i):(E(e,function(e,t,n){r.call(i,e,t,n)&&(o[o.length]=e)}),o)},k.reject=function(e,r,i){return k.filter(e,function(e,t,n){return!r.call(i,e,t,n)},i)},k.every=k.all=function(e,r,i){r||(r=k.identity);var o=!0;return null==e?o:v&&e.every===v?e.every(r,i):(E(e,function(e,t,n){if(!(o=o&&r.call(i,e,t,n)))return a}),!!o)};var O=k.some=k.any=function(e,r,i){r||(r=k.identity);var o=!1;return null==e?o:g&&e.some===g?e.some(r,i):(E(e,function(e,t,n){if(o||(o=r.call(i,e,t,n)))return a}),!!o)};k.contains=k.include=function(e,t){return null!=e&&(m&&e.indexOf===m?-1!=e.indexOf(t):O(e,function(e){return e===t}))},k.invoke=function(e,t){var n=u.call(arguments,2),r=k.isFunction(t);return k.map(e,function(e){return(r?t:e[t]).apply(e,n)})},k.pluck=function(e,t){return k.map(e,function(e){return e[t]})},k.where=function(e,n,t){return k.isEmpty(n)?t?null:[]:k[t?"find":"filter"](e,function(e){for(var t in n)if(n[t]!==e[t])return!1;return!0})},k.findWhere=function(e,t){return k.where(e,t,!0)},k.max=function(e,i,o){if(!i&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!i&&k.isEmpty(e))return-1/0;var a={computed:-1/0,value:-1/0};return E(e,function(e,t,n){var r=i?i.call(o,e,t,n):e;r>=a.computed&&(a={value:e,computed:r})}),a.value},k.min=function(e,i,o){if(!i&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!i&&k.isEmpty(e))return 1/0;var a={computed:1/0,value:1/0};return E(e,function(e,t,n){var r=i?i.call(o,e,t,n):e;r<a.computed&&(a={value:e,computed:r})}),a.value},k.shuffle=function(e){var t,n=0,r=[];return E(e,function(e){t=k.random(n++),r[n-1]=r[t],r[t]=e}),r};var I=function(t){return k.isFunction(t)?t:function(e){return e[t]}};k.sortBy=function(e,t,r){var i=I(t);return k.pluck(k.map(e,function(e,t,n){return{value:e,index:t,criteria:i.call(r,e,t,n)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(r<n||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index<t.index?-1:1}),"value")};var j=function(r,e,i,o){var a={},u=I(e||k.identity);return E(r,function(e,t){var n=u.call(i,e,t,r);o(a,n,e)}),a};k.groupBy=function(e,t,n){return j(e,t,n,function(e,t,n){(k.has(e,t)?e[t]:e[t]=[]).push(n)})},k.countBy=function(e,t,n){return j(e,t,n,function(e,t){k.has(e,t)||(e[t]=0),e[t]++})},k.sortedIndex=function(e,t,n,r){for(var i=(n=null==n?k.identity:I(n)).call(r,t),o=0,a=e.length;o<a;){var u=o+a>>>1;n.call(r,e[u])<i?o=u+1:a=u}return o},k.toArray=function(e){return e?k.isArray(e)?u.call(e):e.length===+e.length?k.map(e,k.identity):k.values(e):[]},k.size=function(e){return null==e?0:e.length===+e.length?e.length:k.keys(e).length},k.first=k.head=k.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:u.call(e,0,t)},k.initial=function(e,t,n){return u.call(e,0,e.length-(null==t||n?1:t))},k.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},k.rest=k.tail=k.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},k.compact=function(e){return k.filter(e,k.identity)};var S=function(e,t,n){return E(e,function(e){k.isArray(e)?t?o.apply(n,e):S(e,t,n):n.push(e)}),n};k.flatten=function(e,t){return S(e,t,[])},k.without=function(e){return k.difference(e,u.call(arguments,1))},k.uniq=k.unique=function(n,r,e,t){k.isFunction(r)&&(t=e,e=r,r=!1);var i=e?k.map(n,e,t):n,o=[],a=[];return E(i,function(e,t){(r?t&&a[a.length-1]===e:k.contains(a,e))||(a.push(e),o.push(n[t]))}),o},k.union=function(){return k.uniq(c.apply(i,arguments))},k.intersection=function(e){var n=u.call(arguments,1);return k.filter(k.uniq(e),function(t){return k.every(n,function(e){return 0<=k.indexOf(e,t)})})},k.difference=function(e){var t=c.apply(i,u.call(arguments,1));return k.filter(e,function(e){return!k.contains(t,e)})},k.zip=function(){for(var e=u.call(arguments),t=k.max(k.pluck(e,"length")),n=new Array(t),r=0;r<t;r++)n[r]=k.pluck(e,""+r);return n},k.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},k.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return e[r=k.sortedIndex(e,t)]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(m&&e.indexOf===m)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},k.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=r?n:e.length;i--;)if(e[i]===t)return i;return-1},k.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=0,o=new Array(r);i<r;)o[i++]=e,e+=n;return o},k.bind=function(e,t){if(e.bind===x&&x)return x.apply(e,u.call(arguments,1));var n=u.call(arguments,2);return function(){return e.apply(t,n.concat(u.call(arguments)))}},k.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}},k.bindAll=function(t){var e=u.call(arguments,1);return 0===e.length&&(e=k.functions(t)),E(e,function(e){t[e]=k.bind(t[e],t)}),t},k.memoize=function(t,n){var r={};return n||(n=k.identity),function(){var e=n.apply(this,arguments);return k.has(r,e)?r[e]:r[e]=t.apply(this,arguments)}},k.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},k.defer=function(e){return k.delay.apply(k,[e,1].concat(u.call(arguments,1)))},k.throttle=function(n,r){var i,o,a,u,c=0,s=function(){c=new Date,a=null,u=n.apply(i,o)};return function(){var e=new Date,t=r-(e-c);return i=this,o=arguments,t<=0?(clearTimeout(a),a=null,c=e,u=n.apply(i,o)):a||(a=setTimeout(s,t)),u}},k.debounce=function(r,i,o){var a,u;return function(){var e=this,t=arguments,n=o&&!a;return clearTimeout(a),a=setTimeout(function(){a=null,o||(u=r.apply(e,t))},i),n&&(u=r.apply(e,t)),u}},k.once=function(e){var t,n=!1;return function(){return n||(n=!0,t=e.apply(this,arguments),e=null),t}},k.wrap=function(t,n){return function(){var e=[t];return o.apply(e,arguments),n.apply(this,e)}},k.compose=function(){var n=arguments;return function(){for(var e=arguments,t=n.length-1;0<=t;t--)e=[n[t].apply(this,e)];return e[0]}},k.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},k.keys=_||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)k.has(e,n)&&(t[t.length]=n);return t},k.values=function(e){var t=[];for(var n in e)k.has(e,n)&&t.push(e[n]);return t},k.pairs=function(e){var t=[];for(var n in e)k.has(e,n)&&t.push([n,e[n]]);return t},k.invert=function(e){var t={};for(var n in e)k.has(e,n)&&(t[e[n]]=n);return t},k.functions=k.methods=function(e){var t=[];for(var n in e)k.isFunction(e[n])&&t.push(n);return t.sort()},k.extend=function(n){return E(u.call(arguments,1),function(e){if(e)for(var t in e)n[t]=e[t]}),n},k.pick=function(t){var n={},e=c.apply(i,u.call(arguments,1));return E(e,function(e){e in t&&(n[e]=t[e])}),n},k.omit=function(e){var t={},n=c.apply(i,u.call(arguments,1));for(var r in e)k.contains(n,r)||(t[r]=e[r]);return t},k.defaults=function(n){return E(u.call(arguments,1),function(e){if(e)for(var t in e)null==n[t]&&(n[t]=e[t])}),n},k.clone=function(e){return k.isObject(e)?k.isArray(e)?e.slice():k.extend({},e):e},k.tap=function(e,t){return t(e),e};var D=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof k&&(e=e._wrapped),t instanceof k&&(t=t._wrapped);var i=l.call(e);if(i!=l.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=n.length;o--;)if(n[o]==e)return r[o]==t;n.push(e),r.push(t);var a=0,u=!0;if("[object Array]"==i){if(u=(a=e.length)==t.length)for(;a--&&(u=D(e[a],t[a],n,r)););}else{var c=e.constructor,s=t.constructor;if(c!==s&&!(k.isFunction(c)&&c instanceof c&&k.isFunction(s)&&s instanceof s))return!1;for(var f in e)if(k.has(e,f)&&(a++,!(u=k.has(t,f)&&D(e[f],t[f],n,r))))break;if(u){for(f in t)if(k.has(t,f)&&!a--)break;u=!a}}return n.pop(),r.pop(),u};k.isEqual=function(e,t){return D(e,t,[],[])},k.isEmpty=function(e){if(null==e)return!0;if(k.isArray(e)||k.isString(e))return 0===e.length;for(var t in e)if(k.has(e,t))return!1;return!0},k.isElement=function(e){return!(!e||1!==e.nodeType)},k.isArray=w||function(e){return"[object Array]"==l.call(e)},k.isObject=function(e){return e===Object(e)},E(["Arguments","Function","String","Number","Date","RegExp"],function(t){k["is"+t]=function(e){return l.call(e)=="[object "+t+"]"}}),k.isArguments(arguments)||(k.isArguments=function(e){return!(!e||!k.has(e,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(e){return"function"==typeof e}),k.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},k.isNaN=function(e){return k.isNumber(e)&&e!=+e},k.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"==l.call(e)},k.isNull=function(e){return null===e},k.isUndefined=function(e){return void 0===e},k.has=function(e,t){return s.call(e,t)},k.noConflict=function(){return e._=t,this},k.identity=function(e){return e},k.times=function(e,t,n){for(var r=Array(e),i=0;i<e;i++)r[i]=t.call(n,i);return r},k.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var N={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};N.unescape=k.invert(N.escape);var $={escape:new RegExp("["+k.keys(N.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(N.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(t){k[t]=function(e){return null==e?"":(""+e).replace($[t],function(e){return N[t][e]})}}),k.result=function(e,t){if(null==e)return null;var n=e[t];return k.isFunction(n)?n.call(e):n},k.mixin=function(n){E(k.functions(n),function(e){var t=k[e]=n[e];k.prototype[e]=function(){var e=[this._wrapped];return o.apply(e,arguments),R.call(this,t.apply(k,e))}})};var T=0;k.uniqueId=function(e){var t=++T+"";return e?e+t:t},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},F=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(o,e,t){var n;t=k.defaults({},t,k.templateSettings);var r=new RegExp([(t.escape||C).source,(t.interpolate||C).source,(t.evaluate||C).source].join("|")+"|$","g"),a=0,u="__p+='";o.replace(r,function(e,t,n,r,i){return u+=o.slice(a,i).replace(F,function(e){return"\\"+M[e]}),t&&(u+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'"),n&&(u+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),r&&(u+="';\n"+r+"\n__p+='"),a=i+e.length,e}),u+="';\n",t.variable||(u="with(obj||{}){\n"+u+"}\n"),u="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+u+"return __p;\n";try{n=new Function(t.variable||"obj","_",u)}catch(e){throw e.source=u,e}if(e)return n(e,k);var i=function(e){return n.call(this,e,k)};return i.source="function("+(t.variable||"obj")+"){\n"+u+"}",i},k.chain=function(e){return k(e).chain()};var R=function(e){return this._chain?k(e).chain():e};k.mixin(k),E(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=i[t];k.prototype[t]=function(){var e=this._wrapped;return n.apply(e,arguments),"shift"!=t&&"splice"!=t||0!==e.length||delete e[0],R.call(this,e)}}),E(["concat","join","slice"],function(e){var t=i[e];k.prototype[e]=function(){return R.call(this,t.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)},{}]},{},[10]);